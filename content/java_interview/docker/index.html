<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker</title>
    <link rel="stylesheet" href="../../../css/style.css">
</head>

<body>

<section class="container">
    <h1 class="no_mb"><a href="../">Docker</a></h1>
    <div class="after-h1">Вопросы и ответы для подготовки к собеседованиям</div>
    <div class="breadcrumbs">
        <p><a href="../../../">главная</a></p>
        <p><a href="../">Questions</a></p>
        <p>Docker</p>
    </div>
    <ul class="menu">
        <li>
            <p class="mb10">
                <a href="#docker_base">Базовые вопросы</a>
                <span class="submenu-button"></span>
            </p>
            <ul class="menu submenu no-display">
                <li><a href="#docker_about">Что такое Docker и какие проблемы он решает?</a></li>
                <li><a href="#docker_component">Расскажите про основные компоненты Docker</a></li>
                <li><a href="#docker_file">Что такое Dockerfile и каковы его основные инструкции?</a></li>
                <li><a href="#docker_compose">Как работает Docker Compose и в каких случаях его удобно использовать?</a>
                </li>
                <li><a href="#docker_container">В чем разница между образом и контейнером в Docker?</a></li>
            </ul>
        </li>
        <li>
            <p><a href="#docker_command">Команды Docker</a></p>
        </li>
        <li>
            <p class="mb10">
                <a href="#docker_file_command">Команды DockerFile</a>
                <span class="submenu-button"></span>
            </p>
            <ul class="menu no-display">
                <li><a href="#from_x2">Можно ли в докер файле написать 2 команды FROM?</a></li>
            </ul>
        </li>
    </ul>
</section>

<section class="container" id="docker_base">
    <h1><a href="#">Базовые вопросы</a></h1>
    <ul class="menu after-h1">
        <li><a href="#docker_about">Что такое Docker и какие проблемы он решает?</a></li>
        <li><a href="#docker_component">Расскажите про основные компоненты Docker</a></li>
        <li><a href="#docker_file">Что такое Dockerfile и каковы его основные инструкции?</a></li>
        <li><a href="#docker_compose">Как работает Docker Compose и в каких случаях его удобно использовать?</a></li>
        <li><a href="#docker_container">В чем разница между образом и контейнером в Docker?</a></li>
    </ul>

    <div id="docker_about">
        <h3><a href="#docker_base">Что такое Docker и какие проблемы он решает?</a></h3>
        <p class="term">
            <span>Docker</span> — это платформа для разработки, доставки и запуска приложений в контейнерах, которые
            обеспечивают совместимость, изоляцию и более легкое управление зависимостями.
        </p>
        <a class="button button--to_content_menu" href="#docker_base"></a>
    </div>

    <hr>
    <div id="docker_component">
        <h3><a href="#docker_base">Расскажите про основные компоненты Docker</a></h3>
        <div>
            <h3>1. Docker Engine:</h3>
            <p>
                Это основа Docker — среда выполнения (runtime), которая позволяет создавать и запускать контейнеры.
                Она состоит из трех частей:
            </p>
            <ul class="margined tab-2">
                <li>
                    <p class="term">
                        <span>Docker Daemon (dockerd)</span>:
                        работает в фоне и управляет контейнерами, образами, сетями и томами Docker.
                    </p>
                </li>
                <li>
                    <p class="term">
                        <span>Docker Client (docker)</span>:
                        командная строка, с помощью которой пользователи взаимодействуют с Docker Daemon.
                    </p>
                </li>
                <li>
                    <p class="term">
                        <span>REST API</span>:
                        обеспечивает интерфейс для программирования, позволяя приложениям взаимодействовать с Docker
                        Daemon.
                    </p>
                </li>
            </ul>
        </div>
        <div>
            <h3>2. Docker Images (образы):</h3>
            <p>
                Образ - это неизменяемый файл, содержащий всё необходимое для выполнения приложения: код, библиотеки,
                зависимости и параметры среды. Образ служит шаблоном для создания контейнеров.
            </p>
        </div>
        <div>
            <h3>3. Docker Containers (контейнеры):</h3>
            <p>
                Контейнеры — это изолированные экземпляры, созданные на основе образов. Они имеют собственную файловую
                систему, процессы и сетевую изоляцию, но используют ядро хостовой ОС, обеспечивая легковесность и
                высокую скорость запуска.
            </p>
        </div>
        <div>
            <h3>4. Docker Registries (регистры):</h3>
            <p>
                Это хранилища для Docker-образов. Наиболее известным публичным реестром является Docker Hub, но можно
                развернуть и собственные приватные реестры. Регистры позволяют пользователям хранить и обмениваться
                образами.
            </p>
        </div>
        <div>
            <h3>5. Docker Compose:</h3>
            <p>
                Инструмент для определения и управления многоконтейнерными приложениями. С помощью файла
                docker-compose.yml можно определить и запустить приложение, состоящее из нескольких сервисов.
            </p>
        </div>
        <div>
            <h3>6. Docker Swarm:</h3>
            <p>
                Встроенный в Docker механизм оркестрации, позволяющий управлять кластером Docker-серверов как единым
                целым. Он обеспечивает автоматическое распределение контейнеров по узлам кластера и балансировку
                нагрузки.
            </p>
        </div>
        <div>
            <h3>7. Docker Volumes (тома):</h3>
            <p>
                Механизм для постоянного хранения данных, используемый контейнерами. Тома позволяют отделять данные от
                жизненного цикла контейнеров, обеспечивая их сохранность даже при удалении контейнеров.
            </p>
        </div>
        <a class="button button--to_content_menu" href="#docker_base"></a>
    </div>

    <hr>
    <div id="docker_file">
        <h3><a href="#docker_base">Что такое Dockerfile и каковы его основные инструкции?</a></h3>
        <p class="term">
            <span>Dockerfile</span> — это текстовый файл с инструкциями для создания образа Docker
        </p>
        <p> Ключевые инструкции: FROM, RUN, CMD, COPY, ENTRYPOINT, EXPOSE и т.д. </p>
        <p><a class="link-to-source" href="#docker_file_command">Подробнее...</a></p>
        <a class="button button--to_content_menu" href="#docker_base"></a>
    </div>

    <hr>
    <div id="docker_compose">
        <h3><a href="#docker_base">Как работает Docker Compose и в каких случаях его удобно использовать?</a></h3>
        <p class="term">
            <span>Docker Compose</span>
            используется для определения и управления многоконтейнерными Docker-приложениями.
            Он позволяет управлять несколькими контейнерами с помощью единого YAML файла (docker-compose.yml).
        </p>
        <a class="button button--to_content_menu" href="#docker_base"></a>
    </div>

    <hr>
    <div id="docker_container">
        <h3><a href="#docker_base">В чем разница между образом и контейнером в Docker?</a></h3>
        <p class="term">
            <span>Образ</span> — это шаблон или слепок, который используется для создания контейнеров.
        </p>
        <p class="term">
            <span>Контейнер</span>, в свою очередь, это запущенный экземпляр образа, который содержит все необходимые
            компоненты
            приложения и его зависимости.
        </p>
        <a class="button button--to_content_menu no_mb" href="#docker_base"></a>
    </div>

    <a class="button button--to_top_menu " href="#"></a>
</section>

<section class="container" id="docker_command">
    <h1><a href="#">Команды Docker</a></h1>
    <div>
        <table class="list list--content-text-small list--dictionary">
            <caption></caption>
            <thead>
            <tr>
                <th>Команда</th>
                <th>Описание</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>docker pull</td>
                <td>
                    <p>Загружает образ из Docker Hub или другого Docker Registry на локальную машину</p>
                    <p>Раздел: Образы</p>
                    <p>Пример: <span class="code-word">docker pull ubuntu</span></p>
                </td>
            </tr>
            <tr>
                <td>docker ps</td>
                <td>
                    <p>Показывает список запущенных контейнеров</p>
                    <p>Раздел: Контейнеры</p>
                    <p>Пример: <span class="code-word">docker ps</span></p>
                </td>
            </tr>
            <tr>
                <td>docker build</td>
                <td>
                    <p>Создает Docker-образ из Dockerfile</p>
                    <p>Раздел: Создание образов</p>
                    <p>Пример: <span class="code-word">docker build -t my_image .</span></p>
                </td>
            </tr>
            <tr>
                <td>docker run</td>
                <td>
                    <p>Запускает контейнер из указанного образа</p>
                    <p>Раздел: Запуск контейнеров</p>
                    <p>Пример: <span class="code-word">docker run -d -p 80:80 nginx</span></p>
                </td>
            </tr>
            <tr>
                <td>docker compose</td>
                <td>
                    <p>Управляет многоконтейнерными Docker-приложениями с помощью Docker Compose</p>
                    <p>Раздел: Оркестрация</p>
                    <p>Пример: <span class="code-word">docker-compose up</span></p>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <a class="button button--to_top_menu " href="#"></a>
</section>

<section class="container" id="docker_file_command">
    <h1><a href="#">Команды DockerFile</a></h1>
    <p class="term">
        <span>Dockerfile</span>
        - это текстовый файл со скриптами, который содержит инструкции для сборки Docker-образа. Он определяет, как
        создавать образ, включая базовые образы, копирование файлов, установку пакетов и выполнение команд.
    </p>
    <div style="overflow: auto">
        <table class="list list--dictionary list--content-text-small">
            <caption></caption>
            <thead>
            <tr>
                <th>Команда</th>
                <th>Описание</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>FROM</td>
                <td>
                    <p>
                        Задает базовый образ для сборки нового образа.
                        Это первая инструкция, используемая в Dockerfile.
                    </p>
                    <p>Пример: <span class="code-word">FROM python:3.9-slim</span></p>
                </td>
            </tr>
            <tr>
                <td>LABEL</td>
                <td>
                    <p>Для добавления метаданных к образу, таких как автор или версия.</p>
                    <p>Пример: <span class="code-word">LABEL maintainer="maintainer@example.com"</span></p>
                </td>
            </tr>
            <tr>
                <td>RUN</td>
                <td>
                    <p>
                        Выполняет команды в контейнере на стадии сборки образа.
                        Используется для установки пакетов и настройки окружения.
                    </p>
                    <p>Пример: <span class="code-word">RUN apt-get update && apt-get install -y python3-pip</span></p>
                </td>
            </tr>
            <tr>
                <td>COPY</td>
                <td>
                    <p>Копирует файлы и каталоги из контекста сборки на файл-систему образа.</p>
                    <p>Пример: <span class="code-word">COPY . /app</span></p>
                </td>
            </tr>
            <tr>
                <td>ADD</td>
                <td>
                    <p>
                        Похожая на COPY команда, но с дополнением:
                        может извлекать файлы из архивов и загружать файлы по URL.
                    </p>
                    <p>Пример: <span class="code-word">ADD package.tar.gz /app</span></p>
                </td>
            </tr>
            <tr>
                <td>CMD</td>
                <td>
                    <p>
                        Задает команду по умолчанию, которая выполняется при запуске контейнера.
                        Может быть переопределена при запуске контейнера.
                    </p>
                    <p>Пример: <span class="code-word">CMD ["python", "app.py"]</span></p>
                </td>
            </tr>
            <tr>
                <td>ENTRYPOINT</td>
                <td>
                    <p>
                        Устанавливает основную команду и параметры, которые нельзя переопределить из командной строки
                        при запуске контейнера, если не использовать специальные флаги (--entrypoint).
                    </p>
                    <p>Пример: <span class="code-word">ENTRYPOINT ["python", "app.py"]</span></p>
                </td>
            </tr>
            <tr>
                <td>ENV</td>
                <td>
                    <p>Устанавливает переменные окружения в контейнере.</p>
                    <p>Пример: <span class="code-word">ENV APP_ENV=production</span></p>
                </td>
            </tr>
            <tr>
                <td>EXPOSE</td>
                <td>
                    <p>
                        Документирует, что контейнер слушает на указанных портах в протоколе TCP или UDP.
                        Это больше используется для информации и никак не настраивает сетевые правила.
                    </p>
                    <p>Пример: <span class="code-word">EXPOSE 80</span></p>
                </td>
            </tr>
            <tr>
                <td>VOLUME</td>
                <td>
                    <p>
                        Создает точку монтирования для хранения данных,
                        которые должны сохраняться между перезапусками контейнера.
                    </p>
                    <p>Пример: <span class="code-word">VOLUME ["/data"]</span></p>
                </td>
            </tr>
            <tr>
                <td>WORKDIR</td>
                <td>
                    <p>Устанавливает рабочую директорию для следующих инструкций (например, RUN, CMD, ENTRYPOINT).</p>
                    <p>Пример: <span class="code-word">WORKDIR /app</span></p>
                </td>
            </tr>
            <tr>
                <td>ARG</td>
                <td>
                    <p>
                        Определяет переменные, которые могут быть переданы на этапе сборки, например,
                        через команду docker build.
                    </p>
                    <p>Пример: <span class="code-word">ARG VERSION=1.0</span></p>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <hr>
    <div id="from_x2">
        <h3>Можно ли в докер файле написать 2 команды FROM?</h3>
        <div>
            <p class="answer">Да. можно</p>
            <p> В Dockerfile, каждая инструкция FROM начинает новую стадию сборки, и это известный способ создания
                многоступенчатых сборок (multi-stage builds). Каждая стадия сборки начинается с FROM, и все инструкции,
                указанные после FROM, применяются к этой стадии до следующей инструкции FROM.</p>

            <p> Использование нескольких FROM может иметь следующие последствия и преимущества: </p>

            <ul>
                <li class="term mb10">
                    <span>Многоступенчатая сборка</span>:
                    <br> Позволяет создавать промежуточные стадии для оптимизации конечного образа.
                    <br>Например, вы можете использовать первый базовый образ для компиляции и сборки приложения,
                    а вторую стадию — для создания финального, минимального образа, в который включено только
                    необходимое для выполнения вашего приложения.
                    <br>
                    Это может значительно уменьшить размер финального Docker-образа, так как в конечный образ попадет
                    только то, что необходимо для работы приложения, без лишних инструментов сборки и зависимостей.
                </li>
                <li class="term mb10">
                    <span>Отдельные логические образы</span>:
                    <br> Если в Dockerfile используется несколько FROM, это создает несколько отдельных образов.
                    <br>Они независимы друг от друга, и ваши стадии не будут делить файлы между собой,
                    если вы явно этого не укажете.
                </li>
                <li class="term">
                    <span>Артефакты между стадиями</span>:
                    <br>Для передачи файлов между стадиями можно использовать инструкцию
                    <span class="code-word">COPY --from=stage_name</span> или
                    <span class="code-word">COPY --from=stage_index</span>.
                    <br>Это позволяет брать артефакты (например, исполняемые файлы или библиотеки)
                    из одного образа и помещать их в другой.
                </li>
            </ul>

            <p>Пример использования многоступенчатой сборки:</p>
            <div class="code"><pre><comment># Стадия сборки</comment>
FROM golang:1.20 AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp

<comment># Финальная стадия</comment>
FROM ubuntu:22.04
WORKDIR /app
COPY --from=builder /app/myapp .
CMD ["./myapp"]
</pre>
            </div>
        </div>
    </div>

    <a class="button button--to_top_menu " href="#"></a>
</section>

<a href="#" class="button button--top"></a>

<footer>
    <div class="footer__text"><a href="https://t.me/java40plus" title="Мой блог в телеграм" target="_blank">
        Ⓒ Алексей Маслов, 2021-2024
    </a></div>
</footer>

<script src="../../../js/submenu.js"></script>

</body>

</html>