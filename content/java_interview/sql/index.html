<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL</title>
    <link rel="stylesheet" href="../../../css/style.css">
</head>

<body>

<section class="container">
    <h1 class="no_mb"><a href="../">SQL и Базы данных</a></h1>
    <div class="after-h1">Вопросы и ответы для подготовки к собеседованиям</div>
    <div class="breadcrumbs">
        <p><a href="../../../">главная</a></p>
        <p><a href="..">Questions</a></p>
        <p>SQL</p>
    </div>
    <h3 class="no_mt">Воросы:</h3>
    <ul class="menu">
        <li><a href="#relation_db">Реляционная база данных</a></li>
        <li><a href="#sql_about">Что такое SQL</a></li>
        <li>
            <p class="mb10">
                <a href="#sql_command">Команды SQL</a>
                <span class="submenu-button"></span>
            </p>
            <ul class="menu no-display">
                <li><a href="#ddl">DDL<br><span class="example">Data Definition Language</span></a></li>
                <li><a href="#dcl">DCL<br><span class="example">Data Control Language</span></a></li>
                <li><a href="#tcl">TCL<br><span class="example">Тгаnsасtiоn Соntrol Language</span></a></li>
                <li><a href="#dml">DML<br><span class="example">Data Manipulation Language</span></a></li>
            </ul>
        </li>
        <li>
            <p class="mb10">
                <a href="#datatype">Типы данных</a>
                <span class="submenu-button"></span>
            </p>
            <ul class="menu no-display">
                <li><a href="#string_datatype">Строковые</a></li>
                <li><a href="#float_integer_datatype">С плавающей точкой и целые числа</a></li>
                <li><a href="#datetime_datatype">Дата и время</a></li>
                <li><a href="#null">Нюансы работы с NULL в SQL</a></li>
            </ul>
        </li>
        <li><a href="#saved-triggers">Хранимы процедуры и триггеры</a></li>
        <li><a href="#view-temptable">VIEW и временные таблицы</a></li>
        <li><a href="#transactions">Транзакции</a></li>
        <li><a href="#joins">Виды JOIN</a></li>
        <li><a href="#replication-sharding">Репликация и шардирование</a></li>
    </ul>
</section>

<section class="container" id="relation_db">
    <h1><a href="#">Реляционная база данных</a></h1>
    <div>
        <p class="term mb10">
            <span>Реляционная база данных</span>
            - база данных, основанная на реляционной модели данных.
        </p>
        <p>
            Реляционной называется база данных, в которой все данные, доступные пользователю,
            организованы в виде таблиц, а все oпepaции базы данных выполняются над этими таблицами.
        </p>
        <p>Столбцов не может быть 0, строк может быть 0.</p>
        <p class="term mb10">
            В правильно построенной реляционной базе данных в каждой таблице есть
            столбец (или комбинация столбцов), для которого значения во всех строках различны.
            Этот столбец (столбцы) называется <span>первичным ключом (primary key)</span>.
        </p>
        <p class="term mb10">
            Таблица, в которой все строки отличаются друг от друга, в математических
            терминах называется <span>отношением (relation)</span>.
        </p>

        <p>Двенадцать правил, которым должна соответствовать настоящая реляционная база данных:</p>
        <ol class="tab-3">
            <li>
                <p class="term mb10">
                    <span>Правило представления информации.</span><br>
                    Вся информация в реляционной базе данных должна быть представлена исключительно на логическом уровне
                    и только одним способом - в виде значений, содержащихся в таблицах.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило гарантированного доступа.</span><br>
                    Логический доступ ко всем и каждому элементу данных (атомарному значению) в реляционной базе данных
                    должен обеспечиваться путем использования комбинации имени таблицы,
                    значения первичного ключа и имени столбца.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Систематическая трактовка значения NULL.</span><br>
                    В настоящей реляционной базе данных должна быть реализована полная поддержка значений NULL
                    (которые отличаются от строки символов нулевой длины, строки пробельных символов,
                    а также от нуля или любого другого числа), которые используются для представления отсутствующей и
                    неприменимой информации систематическим образом независимо от типа этих данных.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило динамического каталога.</span><br>
                    Описание базы данных на логическом уровне должно быть представлено в том же виде, что и обычные
                    данные, чтобы пользователи, обладающие соответствующими правами,
                    могли работать с ним с помощью того же реляционного языка,
                    который они применяют для работы с основными данными.
                </p>
            </li>
            <li>
                <p class="term">
                    <span>Правило исчерпывающего подъязыка данных.</span><br>
                    Реляционная система может поддерживать несколько языков и режимов взаимодействия с пользователем.
                </p>
                <div>
                    <p>
                        Однако должен существовать по крайней мере один язык, инструкции
                        которого можно представить в виде строк символов в соответствии с некоторым
                        точно определенным синтаксисом и который в полной мере поддерживает
                        все следующие элементы:
                    </p>
                    <ul class="tab-2">
                        <li>определение данных;</li>
                        <li>определение представлений;</li>
                        <li>обработку данных (интерактивную и программную);</li>
                        <li>ограничения целостности данных;</li>
                        <li>авторизацию;</li>
                        <li>границы транзакций (начало, фиксацию и откат).</li>
                    </ul>
                </div>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило обновления представлений.</span><br>
                    Все представления, которые теоретически можно обновить,
                    должны быть доступны для обновления системой.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило высокоуровневого добавления, обновления и удаления.</span><br>
                    Операции вставки, обновления и удаления должны применяться к отношению в целом.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило физической независимости данных.</span><br>
                    Прикладные программы и утилиты для работы с данными на логическом уровне должны
                    оставаться неизменными при любых изменениях способов хранения данных или методов доступа к ним.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило логической независимости данных.</span><br>
                    Прикладные программы и утилиты для работы с данными должны на логическом уровне
                    оставаться нетронутыми при внесении в базовые таблицы любых изменений, которые теоретически
                    позволяют сохранить нетронутыми содержащиеся в этих таблицах данные.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило независимости контроля целостности.</span><br>
                    Должна существовать возможность определять условия целостности, специфичные для конкретной
                    реляционной базы данных, на подъязыке этой базы данных и хранить их в каталоге,
                    а не в прикладной программе.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Правило независимости распространения.</span><br>
                    Реляционная база данных должна быть переносима не только в пределах системы, но и по сети.
                </p>
            </li>
            <li>
                <p class="term">
                    <span>Правило согласования языковых уровней.</span><br>
                    Если в реляционной системе есть низкоуровневый язык (обрабатывающий одну запись за один раз), то он
                    не должен иметь возможность обходить правила и условия целостности данных,
                    выраженные на реляционном языке высокого уровня (обрабатывающем несколько записей за один раз).
                </p>
                <p class="example mb10">
                    Т.е. предотвращает использование других средств работы с базой данных, помимо ее подъязыка,
                    поскольку это может нарушить ее целостность
                </p>
            </li>
        </ol>
    </div>

    <a class="button button--to_top_menu" href="#"></a>

</section>

<section class="container" id="sql_about">
    <h1><a href="#">Что такое SQL</a></h1>
    <div>
        <p class="term mb10">
            <span> SQL (Structured Query Language)</span>
            - язык структурированных запросов.
        </p>
        <p class="term mb10">
            <span>SQL</span>
            является инструментом, предназначенным для организации, управления,
            выборки и обработки информации, содержащейся в реляционных базах данных.
        </p>
        <div>
            <p class="bold">Что умеет SQL:</p>
            <ul>
                <li>
                    <p class="term mb10">
                        <span>Определение данных.</span><br>
                        SQL позволяет пользователю определить структуру и организацию хранимых данных и взаимоотношения
                        между элементами сохраненных данных.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Выборка данных.</span><br>
                        SQL дает пользователю или приложению возможность извлекать из базы содержащиеся в ней данные и
                        пользоваться ими.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Обработка данных.</span><br>
                        SQL позволяет пользователю или приложению изменять базу данных, т.е. добавлять в нее новые
                        данные, а
                        также удалять или обновлять уже имеющиеся в ней данные.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Управление доступом.</span><br>
                        С помощью SQL можно ограничить возможности пользователя по выборке, добавлению и изменению
                        данных и
                        защитить их от несанкционированного доступа.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Совместное использование данных.</span><br>
                        SQL применяется для координации совместного использования данных пользователями,
                        работающими одновременно, с тем чтобы изменения, вносимые одним пользователем,
                        не приводили к непреднамеренному уничтожению изменений,
                        вносимых примерно в то же время иным пользователем.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Целостность данных.</span><br>
                        SQL позволяет обеспечить целостность базы данных,
                        защищая ее от разрушения из-за несогласованных изменений или
                        отказа системы.
                    </p>
                </li>
            </ul>
        </div>
        <div>
            <p>
                Сердцем СУБД является механизм базы данных (database engine, часто называемый просто движком).
                Oн отвечает за структурирование данных, сохранение и получение их из базы данных. Он принимает
                SQL-запросы
                от других компонентов СУБД, от пользовательских приложений и даже от других вычислительных систем.
            </p>
            <p>
                Язык SQL относится к непроцедурным (nonprocedural) языкам — он лишь описывает нужные компоненты
                (например, таблицы) и желаемые результаты, не указывая, как именно эти результаты должны быть получены.
                Каждая реализация SQL является надстройкой над процессором базы данных (database engine), который
                интерпретирует операторы SQL и определяет порядок обращения к структурам БД для корректного и
                эффективного формирования желаемого результата.
            </p>
        </div>
        <p class="spoiler-string">
            Несколько свойства SQL, обеспечивающие такой его успех в течение последних десятилетий...
        </p>
        <div class="spoiler">
            <ul>
                <li>Независимость от конкретных СУБД</li>
                <li>Межплатформенная переносимость</li>
                <li>Наличие стандартов</li>
                <li>Поддержка со стороны компании IВМ</li>
                <li>Поддержка со стороны компании Microsoft</li>
                <li>Построение на реляционной модели</li>
                <li>Высокоуровневая структура, напоминающая естественный язык</li>
                <li>Возможность выполнения специальных интерактивных запросов</li>
                <li>Обеспечение программного доступа к базам данных</li>
                <li>Возможность различного представления данных</li>
                <li>Полноценность в качестве языка, предназначенного для работы с базами данных</li>
                <li>Возможность динамического определения данных</li>
                <li>Поддержка архитектуры клиент/ сервер</li>
                <li>Поддержка приложений уровня предприятия</li>
                <li>Расширяемость и поддержка объектно-ориентированных технологий</li>
                <li>Возможность доступа к данным в Интернете</li>
                <li>Интеграция с языком java (протокол JDВC)</li>
                <li>Поддержка открытого кода</li>
                <li>Промышленная инфраструктура</li>
            </ul>
        </div>
    </div>
    <div>
        <p class="bold mb10">Итого:</p>
        <ul class="margined">
            <li>SQL основан на реляционной модели данных, в которой данные организованы в виде коллекции таблиц.</li>
            <li>Каждая таблица имеет уникальное имя.</li>
            <li>
                В каждой таблице есть один или несколько именованных столбцов, расположенных в определенном порядке
                слева направо.
            </li>
            <li>
                В каждой таблице есть нуль или более строк, каждая из которых содержит одно значение данных в каждом
                столбце; строки в таблице не упорядочены.
            </li>
            <li>
                Все значения данных в одном столбце имеют одинаковый тип данных и входят в набор допустимых значений,
                который называется доменом столбца.
                <br>Отношения между таблицами реализуются с помощью содержащихся в них данных. В реляционной модели
                данных для представления этих отношений используются первичные и внешние ключи.
            </li>
            <li>
                Первичным ключом может быть столбец или комбинация столбцов таблицы, значения которых уникальным образом
                идентифицируют каждую строку таблицы.
                <br>У таблицы есть только один первичный ключ.
            </li>
            <li>
                Внешним ключом является столбец или группа столбцов таблицы, значения которых совпадают со значениями
                первичного ключа другой таблицы.
                <br>Таблица может содержать несколько внешних ключей, связывающих ее с одной или несколькими другими
                таблицами.
            </li>
            <li>
                Пара "первичный ключ-внешний ключ" создает отношение "предок-потомок" между таблицами, содержащими их.
            </li>
        </ul>
    </div>
    <p><a class="link-to-source" href="https://sql-language.ru/" target="_blank">сайтик про SQL</a></p>
    <a class="button button--to_top_menu" href="#"></a>
</section>

<section class="container" id="sql_command">
    <h1><a href="#">Команды SQL</a></h1>
    <div class="after-h1">
        <h3>Группы команд SQL</h3>
        <ul class="margined">
            <li>
                <p class="term">
                    <a href="#ddl">
                        <span>DDL (Data Definition Language)</span>
                    </a>
                    <br> Команды языка определения данных.
                </p>
                <p class="example">
                    Эти SQL команды можно использовать для создания,
                    изменения и удаления различных объектов базы данных.
                </p>
            </li>
            <li>
                <p class="term">
                    <a href="#dcl">
                        <span>DCL (Data Control Language)</span>
                    </a>
                    <br> Команды языка управления данными.</p>
                <p class="example">
                    С помощью этих SQL команд можно управлять доступом пользователей к базе данных и использовать
                    конкретные данные (таблицы, представления и т.д.).
                </p>
            </li>
            <li>
                <p class="term">
                    <a href="#tcl">
                        <span>TCL (Тгаnsасtiоn Соntrol Language)</span>
                    </a>
                    <br>Команды языка управления транзакциями.
                </p>
                <p class="example">Эти SQL команды позволяют определить исход транзакции.</p>
            </li>
            <li>
                <p class="term">
                    <a href="#dml">
                        <span>DML (Data Manipulation Language)</span>
                    </a>
                    <br> Команды языка манипулирования данными.
                </p>
                <p class="example">Эти SQL команды позволяют пользователю перемещать данные в базу данных и из нее.</p>
            </li>
        </ul>
    </div>

    <div id="ddl">
        <h3><a href="#sql_command">DLL команды</a></h3>
        <div>
            <ul>
                <li>
                    <p class="term">
                        <span>CREATE</span><br>
                        Создает объект БД (базу, таблицу, представление, пользователя
                        и&nbsp;т.д.).
                    </p>
                    <p class="example mb10">CREATE DATABASE Test</p>
                </li>
                <li>
                    <p class="term">
                        <span>ALTER</span><br>
                        Изменяет объект.
                    </p>
                    <p class="example mb10">ALTER TABLE ...</p>
                </li>
                <li>
                    <p class="term">
                        <span>DROP</span><br>
                        Удаляет объект.
                    </p>
                    <p class="example mb10">DROP TABLE ...</p>
                </li>
                <li>
                    <p class="term">
                        <span>TRUNCATE</span><br>
                        "Удаление" всех записей в таблице.
                    </p>
                    <p class="example">TRUNCATE TABLE ...</p>
                    <div>
                        <p class="spoiler-string">Особенности</p>
                        <div class="spoiler">
                            <ul>
                                <li>Не срабатывают триггеры, в частности, триггер удаления</li>
                                <li>Удаляет все строки в таблице, не записывая при этом удаление отдельных строк данных
                                    в журнал транзакций
                                </li>
                                <li>Сбрасывает счетчик идентификаторов до начального значения</li>
                                <li>Чтобы использовать, необходимы права на изменение таблицы</li>
                                <li>Не используется когда в таблице есть внешние ключи надо использовать DELETE</li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
            <div>
                <p class="spoiler-string">Команды, что бы проверить выполнение</p>
                <div class="spoiler">
                    <p class="term mb10">
                        <span>SHOW DATABASES</span><br>
                        Посмотеть созданые базы.
                    </p>
                    <p class="term mb10">
                        <span>SHOW TABLES</span><br>
                        Кроме пользовательских таблиц покажет также и служебные таблицы.
                    </p>
                    <p class="term mb10">
                        <span> DESCRIBE table_name</span><br>
                        Получение информации о столбцах
                    </p>
                </div>
            </div>
        </div>
        <a class="button button--to_content_menu" href="#sql_command"></a>
    </div>

    <hr>
    <div id="dcl">
        <h3><a href="#sql_command">DCL команды</a></h3>
        <div>
            <ul>
                <li>
                    <p class="term">
                        <span>GRANT</span><br>
                        Предоставляет пользователю (группе) разрешения на определенные операции с объектом.
                    </p>
                    <p class="example mb10">
                        Предоставление права чтения таблицы students пользователю.
                        <br>GRANT SELECT ON&nbsp;table_name TO&nbsp;user_name;
                    </p>
                </li>
                <li>
                    <p class="term">
                        <span>REVOKE</span><br>
                        Отзывает ранее выданные разрешения.
                    </p>
                    <p class="example mb10">
                        Отменить запрет.
                        <br>REVOKE SELECT ON&nbsp;table_name FROM&nbsp;user_name;
                    </p>
                </li>
                <li>
                    <p class="term">
                        <span>DENY</span><br>
                        Задает запрет, имеющий приоритет над разрешением
                    </p>
                    <p class="example mb10">
                        Запрет права выборки из таблицы пользователя.
                        <br>DENY SELECT ON&nbsp;table_name TO&nbsp;user_name;
                    </p>
                </li>
            </ul>
        </div>
        <a class="button button--to_content_menu" href="#sql_command"></a>
    </div>

    <hr>
    <div id="tcl">
        <h3><a href="#sql_command">TCL команды</a></h3>
        <div>
            <ul>
                <li>
                    <p class="term mb10">
                        <span>COMMIT</span><br>
                        Применяется для завершения транзакции и сохранения изменений в базе данных.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>ROLLBACK</span><br>
                        Откатывает все изменения, сделанные в контексте текущей транзакции.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>SAVEPOINT</span><br>
                        Создаёт точку к которой группа транзакций может откатиться,
                        разбивает транзакцию на более мелкие.
                    </p>
                </li>
                <li>
                    <p class="term">
                        <span>SET</span> TRANSACTION<br>
                        Применяется для установки параметров доступа к данным в текущей транзакции.
                    </p>
                    <p class="example">
                        Транзакция предназначена только для чтения:
                        <br>SET TRANSACTION READ ONLY
                    </p>
                </li>
            </ul>
            <p class="main-mind">
                Команды управление транзакциями используются только для DML команд: INSERT, UPDATE, DELETE
            </p>
        </div>
        <a class="button button--to_content_menu" href="#sql_command"></a>
    </div>

    <hr>
    <div id="dml">
        <h3><a href="#sql_command">DML команды</a></h3>
        <div>
            <ul class="margined">
                <li>
                    <p class="term">
                        <span>SELECT</span><br>
                        Выбирает данные, удовлетворяющие заданным условиям.
                    </p>
                    <div>
                        <p class="spoiler-string">Схема запроса</p>
                        <div class="spoiler">
                            <div class="code">
                                SELECT [DISTINCT | ALL] поля_таблиц
                                <br>FROM список_таблиц
                                <br>[WHERE условия_на_ограничения_строк]
                                <br>[GROUP BY условия_группировки]
                                <br>[HAVING условия_на_ограничения_строк_после_группировки по агрегатным функциям]
                                <br>[ORDER BY порядок_сортировки [ASC | DESC]]
                                <br>[LIMIT ограничение_количества_записей]
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <p class="term">
                        <span>INSERT</span><br>
                        Добавляет новые данные.
                    </p>
                    <div>
                        <p class="spoiler-string">Схема запроса</p>
                        <div class="spoiler">
                            <div class="code">
                                INSERT INTO имя_таблицы [(поле_таблицы, ...)]
                                <br>VALUES (значение_поля_таблицы, ...)
                                <br>| SELECT поле_таблицы, ... FROM имя_таблицы ...
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <p class="term mb10">
                        <span>UPDATE</span><br>
                        Изменяет существующие данные.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>DELETE</span><br>
                        Удаляет данные.
                    </p>
                </li>
            </ul>
        </div>
        <a class="button button--to_content_menu" href="#sql_command"></a>
    </div>

    <hr>
    <a class="button button--to_top_menu" href="#"></a>
</section>

<section class="container" id="datatype">
    <h1><a href="#">Типы данных</a></h1>
    <div class="after-h1 menu">
        <ul>
            <li><a href="#string_datatype">Строковые</a></li>
            <li><a href="#float_integer_datatype">С плавающей точкой и целые числа</a></li>
            <li><a href="#datetime_datatype">Дата и время</a></li>
        </ul>
    </div>
    <div id="string_datatype">
        <h3><a href="#datatype">Строковые</a></h3>
        <table class="list list--dictionary" aria-label="string_datatype">
            <thead>
            <tr>
                <th>Типы данных SQL</th>
                <th>Описание</th>
            <tr>
            </thead>
            <tr>
                <td>CHAR(size)</td>
                <td>Строки фиксированной длиной (могут содержать буквы, цифры и специальные символы).
                    <br>Фиксированный размер указан в скобках.
                    <br>Можно записать до 255&nbsp;символов
                </td>
            </tr>
            <tr>
                <td>VARCHAR(size)</td>
                <td>Может хранить не более 255&nbsp;символов.</td>
            </tr>
            <tr>
                <td>TINYTEXT</td>
                <td>Может хранить не более 255&nbsp;символов.</td>
            </tr>
            <tr>
                <td>TEXT</td>
                <td>Может хранить не более 65&nbsp;535&nbsp;символов.</td>
            </tr>
            <tr>
                <td>BLOB</td>
                <td>Может хранить не более 65&nbsp;535&nbsp;символов.</td>
            </tr>
            <tr>
                <td>MEDIUMTEXT</td>
                <td>Может хранить не более 16&nbsp;777&nbsp;215&nbsp;символов.</td>
            </tr>
            <tr>
                <td>MEDIUMBLOB</td>
                <td>Может хранить не более 16&nbsp;777&nbsp;215&nbsp;символов.</td>
            </tr>
            <tr>
                <td>LONGTEXT</td>
                <td>Может хранить не более 4&nbsp;294&nbsp;967&nbsp;295&nbsp;символов.</td>
            </tr>
            <tr>
                <td>LONGBLOB</td>
                <td>Может хранить не более 4&nbsp;294&nbsp;967&nbsp;295&nbsp;символов.</td>
            </tr>
            <tr>
                <td>ENUM(x,y,z,etc.)</td>
                <td>
                    Позволяет вводить список допустимых значений.
                    <br>Может содержать до 65&nbsp;535.
                    <br>Если при вставке значения не будет присутствовать в списке ENUM, то мы получим пустое
                    значение.
                    <br>Ввести возможные значения можно в таком формате: ENUM ( 'X', 'Y', 'Z')
                </td>
            </tr>
            <tr>
                <td>SET</td>
                <td>Как ENUM, но может содержать до 64&nbsp;значений.</td>
            </tr>
        </table>
        <a class="button button--to_content_menu" href="#datatype"></a>
    </div>

    <hr>
    <div id="float_integer_datatype">
        <h3><a href="#datatype">С плавающей точкой (дробные числа) и целые числа</a></h3>
        <table class="list" aria-label="float_integer_datatype">
            <thead>
            <tr>
                <th>Типы данных SQL</th>
                <th>Описание</th>
            <tr>
            </thead>
            <tr>
                <td>TINYINT(size)</td>
                <td>Может хранить числа от -128 до 127</td>
            </tr>
            <tr>
                <td>SMALLINT(size)</td>
                <td>Диапазон от -32&nbsp;768 до 32&nbsp;767</td>
            </tr>
            <tr>
                <td>MEDIUMINT(size)</td>
                <td>Диапазон от -8&nbsp;388&nbsp;608 до 8&nbsp;388&nbsp;607</td>
            </tr>
            <tr>
                <td>INT(size)</td>
                <td>Диапазон от -2&nbsp;147&nbsp;483&nbsp;648 до 2&nbsp;147&nbsp;483&nbsp;647</td>
            </tr>
            <tr>
                <td>BIGINT(size)</td>
                <td>
                    Диапазон от -9&nbsp;223&nbsp;372&nbsp;036&nbsp;854&nbsp;775&nbsp; 808
                    до 9&nbsp;223&nbsp;372&nbsp;036&nbsp;854&nbsp;775&nbsp;807
                </td>
            </tr>
            <tr>
                <td>FLOAT(size,d)</td>
                <td>Число с плавающей точкой небольшой точности.</td>
            </tr>
            <tr>
                <td>DOUBLE(size,d)</td>
                <td>Число с плавающей точкой двойной точности.</td>
            </tr>
            <tr>
                <td>DECIMAL(size,d)</td>
                <td>Дробное число, хранящееся в виде строки.</td>
            </tr>
        </table>
        <a class="button button--to_content_menu" href="#datatype"></a>
    </div>

    <hr>
    <div id="datetime_datatype">
        <h3><a href="#datatype">Дата и время</a></h3>
        <table class="list" aria-label="datetime_datatype">
            <thead>
            <tr>
                <th>Типы данных SQL</th>
                <th>Описание</th>
            <tr>
            </thead>
            <tr>
                <td>DATE()</td>
                <td>Дата в формате <span class="wrap-no">ГГГГ-ММ-ДД</span></td>
            </tr>
            <tr>
                <td>DATETIME()</td>
                <td>
                    Дата и время в формате
                    <span class="wrap-no">ГГГГ-ММ-ДД ЧЧ:ММ:СС</span>
                </td>
            </tr>
            <tr>
                <td>TIMESTAMP()</td>
                <td>
                    Дата и время в формате timestamp.
                    <br>Однако при получении значения поля оно отображается не в формате timestamp, а
                    в виде <span class="wrap-no">ГГГГ-ММ-ДД ЧЧ:ММ:СС</span>
                </td>
            </tr>
            <tr>
                <td>TIME()</td>
                <td>Время в формате <span class="wrap-no">ЧЧ:ММ:СС</span></td>
            </tr>
            <tr>
                <td>YEAR()</td>
                <td>Год в двух значной или в четырехзначном формате.</td>
            </tr>
        </table>
        <a class="button button--to_content_menu" href="#datatype"></a>
    </div>
    <hr class="mb10">
    <p>У каждой реализации могут быть свои типы данных!!!</p>

    <hr>
    <div id="null">
        <h3><a href="#">Нюансы работы с NULL в&nbsp;SQL</a></h3>
        <div>
            <p class="term mb10">
                <span>NULL</span>
                - специальное значение (псевдозначение), которое может быть записано в поле таблицы базы данных.
                NULL соответствует понятию «пустое поле», то есть "поле, не содержащее никакого значения".
            </p>
            <p class="main-mind">
                NULL означает отсутствие, неизвестность информации.
            </p>
            <p class="main-mind">
                Значение NULL не является значением в полном смысле слова: по определению оно означает отсутствие
                значения и не принадлежит ни одному типу данных.
            </p>
            <p class="main-mind">
                Поэтому NULL не равно ни логическому значению FALSE, ни пустой строке, ни&nbsp;0.
            </p>
            <p class="main-mind">
                При сравнении NULL с любым значением будет получен результат NULL, а не&nbsp;FALSE и не&nbsp;0.
            </p>
            <p class="main-mind">
                Более того, NULL не равно NULL!
            </p>
            <p class="term">Команды для проверки: <span>IS&nbsp;NULL, IS&nbsp;NOT&nbsp;NULL</span></p>

        </div>
        <a class="button button--to_content_menu" href="#"></a>
    </div>

    <a class="button button--to_top_menu" href="#"></a>
</section>

<section class="container" id="saved-triggers">
    <h1><a href="#">Хранимые процедуры и триггеры</a></h1>

    <div id="saved">
        <h3><a href="#saved-triggers">Хранимые процедуры</a></h3>
        <div>
            <p class="term mb10">
                <span>Хранимая процедура</span>
                - объект базы данных, представляющий собой набор SQL-инструкций, который компилируется один раз и
                хранится на сервере.
            </p>
            <p>
                Хранимые процедуры очень похожи на обыкновенные процедуры языков высокого
                уровня, у них могут быть входные и выходные параметры и локальные переменные, в них могут производиться
                числовые вычисления и операции над символьными данными, результаты которых могут присваиваться
                переменным и параметрам.
            </p>
            <p>
                В хранимых процедурах могут выполняться стандартные операции с базами данных (как DDL, так и
                DML). Кроме того, в хранимых процедурах возможны циклы и ветвления, то есть в них могут использоваться
                инструкции управления процессом исполнения.
            </p>
        </div>
        <a class="button button--to_content_menu" href="#"></a>
    </div>

    <hr>
    <div id="triggers">
        <h3><a href="#saved-triggers">Триггеры</a></h3>
        <div>
            <p class="term">
                <span>Триггеры</span>
                представляют специальный тип хранимой процедуры, которая вызывается автоматически при выполнении
                определенного действия над таблицей или представлением, в частности, при добавлении, изменении или
                удалении данных, то есть при выполнении команд INSERT, UPDATE, DELETE.
            </p>
            <p class="example">
                Допустим, в таблице Products хранятся данные о товарах. Но цена товара нередко содержит различные
                надбавки
                типа налога на добавленную стоимость, налога на добавленную коррупцию и так далее. Человек, добавляющий
                данные, может не знать все эти тонкости с налоговой базой, и он определяет чистую цену. С помощью
                триггера мы можем поправить цену товара на некоторую величину.
            </p>
            <p>Схема запроса</p>
            <div class="code">
                CREATE TRIGGER имя_триггера
                <br>ON {имя_таблицы | имя_представления}
                <br>{AFTER | INSTEAD OF} [INSERT | UPDATE | DELETE]
                <br>AS выражения_sql
            </div>
        </div>
        <a class="button button--to_content_menu" href="#triggers"></a>
    </div>

    <a class="button button--to_top_menu" href="#"></a>
</section>

<section class="container" id="view-temptable">
    <h1><a href="#">VIEW и временные таблицы</a></h1>

    <div id="view">
        <h3><a href="#view-temptable">VIEW</a></h3>
        <div>
            <p class="term mb10">
                <span>View (Представление)</span>
                - виртуальная таблица, представляющая данные одной или более таблиц альтернативным образом.
            </p>
            <p>
                В действительности представление – всего лишь результат выполнения оператора SELECT, который хранится в
                структуре памяти, напоминающей SQL таблицу. Они работают в запросах и операторах DML точно также как и
                основные таблицы, но не содержат никаких собственных данных.
            </p>
            <p class="main-mind">
                Представления значительно расширяют возможности управления данными.
            </p>
            <p class="no_mb"> Пример дать публичный доступ к некоторой (но&nbsp;не&nbsp;всей) информации в таблице:</p>
            <div class="code"><pre>CREATE VIEW Londonstaff
        AS SELECT *
        FROM Salespeople
        WHERE city = 'London';</pre>
            </div>
        </div>
        <a class="button button--to_content_menu" href="#view-temptable"></a>
    </div>

    <hr>
    <div id="temptable">
        <h3><a href="#view-temptable">Временные таблицы</a></h3>
        <div>
            <p class="term mb10">
                <span>Временная таблица</span>
                - это объект базы данных, который хранится и управляется системой базы данных на временной основе.
            </p>
            <p>Они могут быть локальными (только я могу работать) или глобальными (все).</p>
            <p>
                Используется для сохранения результатов вызова хранимой процедуры, уменьшение числа строк при
                соединениях, агрегирование данных из различных источников или как замена курсоров и параметризованных
                представлений.
            </p>
            <p class="main-mind">Срок жизни временной таблицы – сеанс с БД</p>

        </div>

        <a class="button button--to_content_menu" href="#view-temptable"></a>
    </div>

    <a class="button button--to_top_menu" href="#"></a>
</section>

<section class="container" id="transactions">
    <h1><a href="#">Транзакции</a></h1>
    <ul class="after-h1 menu">
        <li><a href="#transaction">Транзакция</a></li>
        <li><a href="#acid">ACID</a></li>
        <li><a href="#anomaly">Аномалии</a></li>
        <li><a href="#isolation_level">Уровни изоляции</a></li>
    </ul>

    <div id="transaction">
        <h3><a href="#transactions">Транзакция</a></h3>
        <div>
            <p class="term mb10">
                <span>Транзакция</span>
                - это воздействие на базу данных, переводящее её из одного целостного (консистентного) состояния в
                другое и выражаемое в изменении данных, хранящихся в базе данных.
                <br>Это N (N≥1) запросов к БД, которые выполнятся успешно все вместе или не выполнятся вовсе.
            </p>
        </div>
        <a class="button button--to_content_menu" href="#"></a>
    </div>

    <hr>
    <div id="acid">
        <h3><a href="#transactions">ACID</a></h3>
        <div>
            <p>Основные свойства транзакции</p>
            <ul class="margined">
                <li>
                    <p class="term mb10">
                        <span>Атомарность (atomicity)</span><br>
                        Гарантирует, что никакая транзакция не будет зафиксирована в системе частично.
                        Будут либо выполнены все её подоперации, либо не выполнено ни одной.
                    </p>
                </li>
                <li>
                    <p class="term">
                        <span>Согласованность (consistency)</span><br>
                        Транзакция, достигающая своего нормального завершения
                        (EOT — end of transaction, завершение транзакции) и, тем самым, фиксирующая свои результаты,
                        сохраняет согласованность базы данных.
                    </p>
                    <p class="example mb10">
                        Другими словами, каждая успешная транзакция по определению фиксирует только допустимые
                        результаты.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Изолированность (isolation)</span><br>
                        Во время выполнения транзакции параллельные транзакции не должны оказывать влияние на ее
                        результат.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Долговечность (durability)</span><br>
                        Независимо от проблем на нижних уровнях (к примеру, обесточивание системы или сбои в
                        оборудовании) изменения, сделанные успешно завершённой транзакцией, должны
                        остаться сохраненными после возвращения системы в работу. Если пользователь получил
                        подтверждение от системы, что транзакция выполнена, он может быть уверен, что сделанные им
                        изменения не будут отменены из-за какого-либо сбоя.
                    </p>
                </li>
            </ul>
        </div>
        <a class="button button--to_content_menu" href="#"></a>
    </div>

    <hr>
    <div id="anomaly">
        <h3><a href="#transactions">Аномалии</a></h3>
        <div>
            <p>При параллельном выполнении транзакций возможны следующие проблемы (аномалии):</p>
            <ol>
                <li>
                    <p class="term mb10">
                        <span>Потерянное обновление (англ. lost&nbsp;update)</span><br>
                        При одновременном изменении одного блока данных разными транзакциями теряются все изменения,
                        кроме последнего.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Грязное чтение (англ. dirty&nbsp;read)</span><br>
                        Чтение данных, добавленных или изменённых транзакцией, которая впоследствии не подтвердится
                        (откатится);
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Неповторяющееся чтение (англ. <span class="wrap-no">non-repeatable read</span>)</span><br>
                        При повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Фантомное чтение (англ. phantom&nbsp;reads)</span><br>
                        Одна транзакция в ходе своего выполнения несколько раз выбирает множество строк по одним и тем
                        же критериям. Другая транзакция в интервалах между этими выборками добавляет строки или изменяет
                        столбцы некоторых строк, используемых в критериях выборки первой транзакции, и успешно
                        заканчивается. В результате получится, что одни и те же выборки в первой транзакции дают разные
                        множества строк.
                    </p>
                </li>
            </ol>
        </div>
        <a class="button button--to_content_menu" href="#"></a>
    </div>

    <hr>
    <div id="isolation_level">
        <h3><a href="#transactions">Уровни изоляции</a></h3>
        <div>
            <p>
                Выбирая используемый уровень изолированности транзакций, мы, в определённой мере,
                делаем выбор между скоростью работы и обеспечением гарантированной
                согласованности получаемых из системы данных
            </p>
            <ul>
                <li></li>
            </ul>
            <div class="scroll">
                <table class="list list--dictionary" aria-label="isolation_level">
                    <thead>
                    <tr>
                        <th>Уровень изоляции</th>
                        <th>Не должно быть</th>
                        <th>Будут проблемы с</th>
                    <tr>
                    </thead>
                    <tr>
                        <td>
                            READ&nbsp;UNCOMMITTED, DIRTY&nbsp;READ
                            <p class="example">видят не закомиченные результаты +2проблемы</p>
                        </td>
                        <td>lost&nbsp;update</td>
                        <td>dirty&nbsp;read
                            <pre>non-repeatable read</pre>
                            phantom&nbsp;reads
                        </td>
                    </tr>
                    <tr>
                        <td>
                            READ&nbsp;COMMITTED
                            <p class="example">видят закомиченные результаты +2проблемы</p>
                        </td>
                        <td>lost&nbsp;update<br>dirty&nbsp;read</td>
                        <td>
                            <pre>non-repeatable read</pre>
                            phantom&nbsp;reads
                        </td>
                    </tr>
                    <tr>
                        <td>
                            REPEATABLE&nbsp;READ, SNAPSHOT
                            <p class="example">видят результаты Update и Delete +1проблема</p>
                        </td>
                        <td>lost update<br>dirty read
                            <pre>non-repeatable read</pre>
                        </td>
                        <td>phantom&nbsp;reads</td>
                    </tr>
                    <tr>
                        <td>SERIALIZABLE</td>
                        <td>
                            lost&nbsp;update<br>dirty&nbsp;read
                            <pre>non-repeatable read</pre>
                            phantom&nbsp;reads
                        </td>
                        <td>Нет проблем с синхронизацией</td>
                    </tr>
                </table>
            </div>
        </div>
        <a class="button button--to_content_menu" href="#"></a>
    </div>

    <a class="button button--to_top_menu" href="#"></a>
</section>

<section class="container" id="joins">
    <h1><a href="#">Виды JOIN</a></h1>

    <a class="button button--to_top_menu" href="#"></a>
</section>


<section class="container" id="replication-sharding">
    <h1><a href="#">Репликация и шардирование</a></h1>
    <div class="after-h1">
        <ul class="menu">
            <li><a href="#replication">Репликация</a></li>
            <li><a href="#sharding">Шардирование</a></li>
        </ul>
    </div>

    <div id="replication">
        <h3><a href="#replication-sharding">Репликация</a></h3>
        <div>
            <p class="term mb10">
                <span>Реплицирование</span>
                - это процесс создания и поддержания копий данных на нескольких серверах или узлах в
                системе.
            </p>
            <p class="term mb10">
                <span>Основная цель репликации</span>
                - обеспечить отказоустойчивость, повысить доступность данных и
                улучшить производительность системы.
            </p>
            <p class="mb10">
                При репликации одни и те же данные хранятся в нескольких местах, что позволяет системе
                оставаться функциональной даже при выходе из строя одного или нескольких узлов.
            </p>

            <p class="mb10">Существует несколько моделей репликации:</p>
            <ul>
                <li>
                    <p class="term mb10">
                        <span>Синхронная репликация:</span><br>
                        при внесении изменений в данные на одном узле эти изменения сразу же
                        применяются ко всем копиям данных на других узлах.
                        <br>Это гарантирует, что все копии данных остаются консистентными, но может увеличить
                        задержки при операциях записи из-за необходимости дожидаться подтверждения от всех
                        узлов.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Асинхронная репликация:</span><br>
                        изменения на основном узле передаются на реплики с задержкой.
                        <br>Это может улучшить производительность, так как узел не должен ждать подтверждения от
                        реплик при записи, но есть риск того, что данные на репликах временно могут быть
                        неактуальными.
                    </p>
                </li>
            </ul>

            <p class="mb10">Репликация помогает обеспечить:</p>
            <ul>
                <li>
                    <p class="term mb10">
                        <span>Отказоустойчивость:</span><br>
                        если один сервер выходит из строя, данные могут быть доступны с другой реплики.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Доступность:</span><br>
                        при высокой нагрузке запросы могут распределяться между разными репликами, что
                        снижает нагрузку на каждый отдельный узел.
                    </p>
                </li>
                <li>
                    <p class="term mb10">
                        <span>Географическое распределение данных:</span><br>
                        хранение реплик данных в разных географических локациях
                        позволяет пользователям получать доступ к данным с меньшими задержками.
                    </p>
                </li>
            </ul>

            <p class="main-mind">
                Добавление механизма репликации делает систему более сложной с точки
                зрения управления консистентностью данных, особенно в случае асинхронной репликации.
            </p>
        </div>
        <a class="button button--to_content_menu" href="#replication-sharding"></a>
    </div>

    <hr>
    <div id="sharding">
        <h3><a href="#replication-sharding">Шардирование</a></h3>
        <p class="term mb10">
            <span>Шардирование</span> (от англ. "sharding")
            - это метод разделения базы данных или другой системы на более мелкие, управляемые части,
            которые называются "шардами" (shards).
            Каждая шарда — это подмножество данных, которое может быть размещено и обработано отдельно,
            обычно на разных серверах или узлах.
        </p>
        <p class="term mb10">
            <span>Цель шардирования</span>
            - улучшить производительность и масштабируемость системы.
            Оно позволяет распределить нагрузку на несколько серверов, что в свою очередь может сделать
            систему
            более устойчивой к отказам. Если компактно выражаться, шардирование помогает обрабатывать
            большие
            объемы данных более эффективно, обеспечивая параллельную обработку запросов.
            Часто шардирование применяют в распределённых системах и масштабируемых веб-приложениях, где
            требуется обработка больших объёмов данных с высокой скоростью.
        </p>
        <p class="mb10">Основные принципы шардирования:</p>
        <ol class="tab-2">
            <li>
                <p class="term mb10">
                    <span>Чёткое определение логики разделения данных:</span><br>
                    нужно четко решить по какому критерию данные будут
                    распределены между шардамию
                    (например, по какому-то идентификатору, временному интервалу и т.д.).
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Изоляция:</span><br>
                    каждая шарда автономна и может работать независимо от других, хотя данные в шардах
                    часто всё равно нуждаются в согласованности.
                </p>
            </li>
            <li>
                <p class="term mb10">
                    <span>Горизонтальное масштабирование:</span><br>
                    добавление нового шарда позволяет увеличить ёмкость системы без
                    значительных изменений в архитектуре.
                </p>
            </li>
        </ol>
        <a class="button button--to_content_menu" href="#replication-sharding"></a>
    </div>

    <a class="button button--to_top_menu" href="#"></a>

</section>

<footer>
    <div class="footer__text"><a href="https://t.me/java40plus" title="Мой блог в телеграм" target="_blank">
        Ⓒ Алексей Маслов, 2021-2024
    </a></div>
</footer>

</body>

<script src="../../../js/submenu.js"></script>
<script src="../../../js/spoiler.js"></script>

</html>