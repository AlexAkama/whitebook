<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL COURSE</title>
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body>

<section class="container">
    <h1 class="no_mb">JAVA SQL</h1>
    <div class="after-h1">Записки по курсу
        "SQL для начинающих: С&nbsp;нуля до сертификата Oracle "
    </div>
    <ol class="menu">
        <li><a href="#chapter01">Введение в SQL</a></li>
        <li><a href="#chapter02">Знакомство с SELECT</a></li>
        <li><a href="#chapter03">Selection и операторы</a></li>
        <li><a href="#chapter04">Функции</a></li>
        <li><a href="#chapter05">CONVERSION, GENERAL и CONDITIONAL функции</a></li>
        <li><a href="#chapter06">GROUP функции, GROUP BY, HAVING</a></li>
        <li><a href="#chapter07">JOIN(объединение)</a></li>
        <li><a href="#chapter08">SUBQUERY(подзапросы)</a></li>
        <li><a href="#chapter09">SET operators (Операторы множеств)</a></li>
        <li><a href="#chapter10">DML команды</a></li>
        <li><a href="#chapter11">TCL команды</a></li>
        <li><a href="#chapter12">DDL Команды: Работа с таблицами</a></li>
        <li><a href="#chapter13">DDL Команды: CONSTRAINT и INDEX</a></li>
    </ol>
    <div class="back-panel">
        <a href="../../" class="button button--home">На главную</a>
    </div>
</section>

<section class="container" id="chapter01">
    <h1>Раздел 1. <a href="#">Введение&nbsp;в&nbsp;SQL</a><span class="update-time">11.01.2023 12:16</span></h1>
    <p>
        <span class="example--word">SQL (Structured Query Language)</span>
        - Язык структурированных запросов.
    </p>
    <p class="no_mb">
        Один из инструментов работы с БД -
        <span class="example--word">SQL Developer</span>
    </p>
    <p>
        <a class="link-to-source" href="https://www.oracle.com/tools/downloads/sqldev-downloads.html"
           target="_blank">
            скачать</a>
    </p>
    <p class="main-mind">
        БД - совокупность данных, которые хранятся по определенным правилам и используются для удовлетворения
        информационных потребностей пользователей.
    </p>
    <p class="main-mind">
        Реляционная БД - это, где вся информация предоставляется в виде таблиц.
    </p>
    <p class="main-mind no_mb">
        Нормализация — это процесс организации данных в базе данных, включающий создание таблиц и установление отношений
        между ними в соответствии с правилами, которые обеспечивают защиту данных и делают базу данных более гибкой,
        устраняя избыточность и несогласованные зависимости.
    </p>
    <p>
        <a class="link-to-source"
           href="https://docs.microsoft.com/ru-ru/office/troubleshoot/access/database-normalization-description"
           target="_blank">
            Источник
        </a>
    </p>

    <p class="example">
        Еще существуют, например, иерархические БД
    </p>

    <div id="intro_menu">
        <h3>Базовые знания:</h3>
        <p class="tab-1"><a href="#sql_commands">SQL КОМАНДЫ</a></p>
        <p class="tab-1"><a href="#data_type">ТИПЫ ДАННЫХ</a></p>
        <p class="tab-1"><a href="#describe">Команда DESCRIBE</a></p>
        <p class="tab-1"><a href="#db_objects">Объекты БД</a></p>
        <p class="tab-1"><a href="#user_schema">USER и SCHEMA</a></p>
        <p class="tab-1"><a href="#namespace">NAMESPACE</a></p>
    </div>

    <hr>
    <div id="sql_commands">
        <h3><a href="#intro_menu">SQL КОМАНДЫ</a></h3>
        <p class="no_mb"><span class="example--word larger">DML</span> - Data Manipulation Language</p>
        <p class="example">Предназначены для манипуляции данными</p>
        <p class="no_mb"><span class="example--word larger">DDL</span> - Data Definition Language</p>
        <p class="example">Предназначены для определения структуры БД и работы с объектами (CRUD)</p>
        <p class="no_mb"><span class="example--word larger">TCL</span> - Transaction Control Language</p>
        <p class="example">Предназначены для реализации и управления транзакциями</p>
        <p class="no_mb"><span class="example--word larger">DCL</span> - Data Control Language</p>
        <p class="example">Предназначены определения доступа к данным</p>
        <p>
            <a class="link-to-source" href="https://info-comp.ru/what-is-ddl-dml-dcl-tcl" target="_blank">источник</a>
        </p>
        <div class="flex" style="max-width: 500px;">
            <div class="min-w-75">
                <p class="main-mind">DML</p>
                <p><a href="#chapter02">SELECT</a></p>
                <p><a href="#insert">INSERT</a></p>
                <p><a href="#update">UPDATE</a></p>
                <p><a href="#delete">DELETE</a></p>
                <p><a href="#merge">MERGE</a></p>
            </div>
            <div class="min-w-75">
                <p class="main-mind">DDL</p>
                <p>CREATE</p>
                <p>ALTER</p>
                <p>DROP</p>
                <p>RENAME</p>
                <p>TRUNCATE</p>
            </div>
            <div class="min-w-75">
                <p class="main-mind">TCL</p>
                <p><a href="#commit">COMMIT</a></p>
                <p><a href="#rollback">ROLLBACK</a></p>
                <p><a href="#save_point">SAVEPOINT</a></p>
            </div>
            <div class="min-w-75">
                <p class="main-mind">DCL</p>
                <p>GRANT</p>
                <p>REVOKE</p>
            </div>
        </div>
        <p class="example">Это далеко не все команды...</p>
    </div>

    <hr>
    <div id="data_type">
        <h3><a href="#intro_menu">ТИПЫ ДАННЫХ</a></h3>
        <p class="main-mind">
            Тип данных - это множество допустимых значений этих данных, а также совокупность операция над ними.
        </p>
        <h4>Числовые типы</h4>
        <p><span class="code-word">INTEGER</span></p>
        <p class="no_mb"><span class="code-word">NUMBER(p,s)</span></p>
        <p class="example">
            p(precision) - общее максимальное кол-во цифр
            <br>s(scale) - сколько из общего отводится на дробную часть
            <br>Важно! Кол-во на целую часть = p - s
        </p>
        <h4>Алфавитно-цифровые типы</h4>
        <p class="no_mb"><span class="code-word">CHAR(length)</span></p>
        <p class="example">Фиксированная длина</p>
        <p class="no_mb"><span class="code-word">VARCHAR2(size)</span></p>
        <p class="example">Переменная длинна</p>
        <a href="#" class="button button--top"></a>
        <h4>Типы даты и времени</h4>
        <p class="no_mb"><span class="code-word">DATE</span></p>
        <p class="example">Содержит информацию о голе, месяце, дне, часе, минуте, секунде.</p>
        <p class="no_mb"><span class="code-word">TIMESTAMP(f)</span></p>
        <p class="example">Содержит информацию о голе, месяце, дне, часе, минуте, секунде,
            <strong>долях секунды</strong> (f - кол-во десятичных знаков)
        </p>
        <h4>Тип NULL</h4>
        <p class="no_mb"><span class="code-word">NULL</span> - это отсутствие данных.</p>
        <p class="example">0, пробел или строка 'null' - это не null. Они занимают место в памяти.
            <br>Результат арифметических операций с null - всегда null.</p>
        <div class="mb20">
            <h4>Другие типы данных <span class="spoiler-button"></span></h4>
            <div class="spoiler" style="background-color: transparent; border: none;">
                <p class="no_mb"><span class="code-word">TIMESTAMP WITH TIMEZONE</span></p>
                <p class="example no_mt">Такой же как TIMESTAMP, но добавляется данные от часовом поясе.</p>
                <p class="no_mb"><span class="code-word">TIMESTAMP WITH LOCAL TIMEZONE</span></p>
                <p class="example no_mb no_mt">Отличается от предыдущего, тем что не содержит информацию от часовом
                    поясе.</p>
                <p class="example no_mb no_mt">Т.е. дата и время переводится в то время в котором вы находитесь.</p>
                <p class="example no_mt">Важно!!! Два пользователя могут получить разное время.</p>
                <p class="no_mb"><span class="code-word">INTERVAL YEAR TO MONTH</span></p>
                <p class="example no_mt">Содержит значение год и месяц</p>
                <p class="no_mb"><span class="code-word">INTERVAL DAY TO SECOND</span></p>
                <p class="example no_mt">Содержит значение дни, часы, минуты и секунды.</p>
                <p class="no_mb"><span class="code-word">CLOB</span> - Character Large Object</p>
                <p class="example no_mt">Можно хранить огромные текстовые элементы.</p>
                <p class="no_mb"><span class="code-word">BLOB</span> - Binary Large Object</p>
                <p class="example no_mt">Можно хранить огромные бинарные элементы (фото, видео).</p>
                <p class="no_mb"><span class="code-word">LONG</span> - Устаревший</p>
                <p class="example no_mt no_mb">Рекомендуется хранить в CLOB.</p>
                <p class="example no_mt">Два столбца с типом LONG не могут быть в одной таблице.</p>
                <p class="no_mb"><span class="code-word">ROWID</span> - Row ID</p>
                <p class="example no_mt">Относится только к Oracle. Физический адрес строки. Зашифрован.</p>
            </div>
        </div>
    </div>

    <hr>
    <div id="describe">
        <h3><a href="#intro_menu">Команда DESCRIBE</a></h3>
        <p><span class="example--word">Data Dictionary</span>
            - место где Oracle хранит данные о таблицах. Нужна для DDL.</p>
        <div class="code no_mb bold">
            <span class="example--word">DESC</span>RIBE SCHEMA.<span class="example--word">TABLE_NAME</span>
        </div>
        <p class="example">Вывод данных о структуре таблице (имя, тип).</p>
    </div>

    <hr>
    <div id="db_objects">
        <h3><a href="#intro_menu">Объекты базы данных</a></h3>
        <div class="horizontal-schema horizontal-schema--design mb20">
            <div>DB OBJECTS</div>
            <div>
                <div>TABLE</div>
                <div>VIEW</div>
                <div>SYNONYM</div>
                <div>INDEX</div>
                <div>SEQUENCE</div>
            </div>
        </div>

        <div class="code">
            <p>SELECT * FROM dba_objects; // Покажет все объекты БД (если есть доступ)</p>
            <p>SELECT * FROM user_objects; // Покажет все объекты пользователя БД</p>
            <p>SELECT * FROM all_objects; // Покажет все объекты доступные пользователю </p>
        </div>
    </div>

    <hr>
    <div id="user_schema">
        <h3><a href="#intro_menu">USER и SCHEMA</a></h3>
        <p class="main-mind no_mb">USER - это сущность, которая может совершить logon-процесс.</p>
        <p class="example">Есть имя и пароль.</p>
        <p class="main-mind no_mb">SCHEMA - контейнер для всех объектов, принадлежащих одному юзеру.</p>
        <p class="example">По-умолчанию пустая.</p>
        <p>Объект не может быть вне схемы!!!</p>
        <p>Возможно получение доступа к объектам другого пользователя, но нужно предоставить доступ.</p>
        <p>Есть пользователи по-умолчанию, например
            <span class="example--word">SYS</span> и
            <span class="example--word">SYSTEM</span>.
            Их объекты используются для служебных целей и мониторинга.
        </p>
    </div>

    <hr>
    <div id="namespace">
        <h3><a href="#intro_menu">NAMESPACE</a></h3>
        <p>Ограничения для имен:</p>
        <ol>
            <li>Длина от 1 до 30 символов.</li>
            <li>Нельзя использовать зарезервированные слова (from, select, where и т.п.)</li>
            <li>Должно начинаться с буквы (Aa-Zz)</li>
            <li>Можно использовать
                <span class="code-word">_</span>,
                <span class="code-word">$</span>,
                <span class="code-word">#</span>
            </li>
            <li>Прописные буквы конвертируются в заглавные.</li>
        </ol>
        <p class="no_mb">
            Если взять имя в двойные кавычки, то данные правила можно игнорировать, за исключением первого.
        </p>
        <p>Но и использовать придется только с двойными кавчками.</p>
        <p class="no_mb">В NAMESPACE объекты имеют уникальные имена.</p>
        <p>
            INDEX и CONSTRAIN имеют свои неймспейсы, и поэтому они могут совпадать, например, с именами таблиц
            (но так лучше никогда не делать).
        </p>
    </div>

</section>

<section class="container" id="chapter02">
    <h1>Раздел 2. <a href="#">Знакомство&nbsp;с&nbsp;SELECT</a><span class="update-time">13.05.2022 13:21</span></h1>
    <hr>
    <h3>Фундаментальные концепции</h3>
    <p><span class="example--word">PROJECTION</span> - выбор столбцов из таблицы.</p>
    <p><span class="example--word">SELECTION</span> - выбор строк из таблицы.</p>
    <p><span class="example--word">JOINING</span> - объединение таблиц.</p>
    <hr>
    <h3>Команда SELECT</h3>
    <div class="code bold">
        <p><span class="example--word">SELECT *</span></p>
        <p><span class="example--word">FROM&nbsp;table_name;</span></p>
        <p class="example">//&nbsp;базовый синтаксис</p>
    </div>
    <div class="code bold">
        <p class="example--word">SELECT column(s)</p>
        <p class="example--word">FROM&nbsp;table_name;</p>
        <p class="example">//&nbsp;projection</p>
    </div>
    <hr>
    <h3>Оператор DISTINCT</h3>
    <p>Выбор уникальных значений (сочетаний).</p>
    <div class="code bold">
        <p>
            <span class="example--word">SELECT </span>
            <span>DISTINCT </span>
            <span class="example--word"> column(s)</span>
        </p>
        <p><span class="example--word">FROM&nbsp;table_name;</span></p>
    </div>
    <p class="main-mind">Если столбцов несколько, то выводится уникальные сочетания.</p>
    <hr>
    <h3>Выражения в Select list</h3>
    <p class="no_mb"><span class="example--word">Select list</span> - это то что мы выбираем.</p>
    <div class="code">
        <p>
            <span class="example--word bold">SELECT</span>
            <span class="example--word">{Select list}</span>
        </p>
        <p class="example--word bold">FROM&nbsp;table_name;</p>
    </div>
    <div class="code bold">
        <p class="example--word">SELECT column(s), expression(s)</p>
        <p class="example--word">FROM&nbsp;table_name;</p>
    </div>
    <p>Оператор конкатенации - ||</p>
    <hr>
    <h3>Alias (псевдоним)</h3>
    <p><span class="example--word">Alias</span>(псевдоним) - альтернативное имя для столбца или выражения.</p>
    <div class="code bold">
        <p>
            <span class="example--word">SELECT column(s)</span>
            <span>alias</span><span class="example--word">, expression(s)</span>
            <span>alias</span>
        </p>
        <p class="example--word">FROM&nbsp;table_name;</p>
    </div>
    <div class="code bold no_mb">
        <p>
            <span class="example--word">SELECT column(s)</span>
            <span>AS alias</span><span class="example--word">, expression(s)</span>
            <span>AS alias</span>
        </p>
        <p class="example--word">FROM&nbsp;table_name;</p>
    </div>
    <p class="example">AS можно не использовать, но оно добавляет читаемость.</p>
    <div class="code bold no_mb">
        <p>
            <span class="example--word">SELECT column(s)</span>
            <span>"alias text"</span><span class="example--word">, expression(s)</span>
            <span>"alias text"</span>
        </p>
        <p class="example--word">FROM&nbsp;table_name;</p>
    </div>
    <p class="example">Если нужен alias с пробелами в тексе то использовать двойные кавычки.
        <br>Кроме того, если нет кавычек alias будет отображен большими буквами.
    </p>
    <hr>
    <h3>Таблица DUAL</h3>
    <p>Служебная таблица с одним столбцом и одной строкой, и с фиктивными данными.</p>
    <hr>
    <h3>Оператор Q</h3>
    <p class="no_mb">Если в тексте хочется использовать одинарную кавычку то ее надо экранировать другой.</p>
    <p class="example">Пример:
        <span class="bold">'It's my life'</span>
        - <span class="bad">не сработает</span>,
        <span class="bold">'It''s my life'</span>
        - <span class="good">сработает</span>.
    </p>
    <p class="no_mb">Кроме этого можно использовать оператор q (от Quote):</p>
    <div class="code">
        q'delimiter example text с кавычками delimiter'
    </div>
    <div class="code">
        SELECT q'&lt;It' my life&gt;' FROM dual;
    </div>
    <hr>
    <h3 class="no_mb">Шаблон SELECT</h3>
    <p class="bold">после первого знакомства</p>
    <div class="code bold">
        <p>
            <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
            <span class="example--word">column(s)</span>&nbsp;<span>alias,</span>
            <span class="example--word">expression(s)</span>&nbsp;<span>alias</span><span class="bad">}</span>
        </p>
        <p class="example--word">FROM&nbsp;table_name;</p>
    </div>

    <a href="#" class="button button--top"></a>
</section>

<section class="container" id="chapter03">
    <h1>Раздел 3. <a href="#">Selection и&nbsp;операторы</a><span class="update-time">14.05.2022 13:29</span></h1>
    <hr>
    <h3>Концепция Selection</h3>
    <div class="code bold">
        <p>
            <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
            <span class="example--word">column(s)</span>&nbsp;<span>alias,</span>
            <span class="example--word">expression(s)</span>&nbsp;<span>alias</span><span class="bad">}</span>
        </p>
        <p class="example--word">FROM&nbsp;table_name</p>
        <p><span>WHERE&nbsp;condition(s)</span><span class="example--word">;</span></p>
    </div>
    <hr>
    <h3>Операторы сравнения</h3>
    <p>
        <span class="code-word">=</span>
        <span class="code-word">&gt;</span>
        <span class="code-word">&lt;</span>
        <span class="code-word">&gt;=</span>
        <span class="code-word">&lt;=</span>
        <span class="code-word">!=</span>
        <span class="code-word">&lt;&gt;</span>
    </p>
    <p>
        <span class="code-word">BETWEEN</span>
        <span class="code-word">IN</span>
    </p>
    <p>
        <span class="code-word">IS NULL</span>
    </p>
    <table aria-label="Like">
        <tr>
            <th></th>
        </tr>
        <tr>
            <td><span class="code-word no_mb">LIKE</span></td>
            <td class="example">
                <p style="margin-top: 0;">Служебные символы могут быть заменены:</p>
                <p class="no_mb" style="margin-top: 0;">% - на любое кол-во символов;</p>
                <p class="no_mb" style="margin-top: 0;">_ - на один символ;</p>
                <p>Для экранирования: ... LIKE 'St\_%' <strong>ESCAPE</strong> '\';</p>
            </td>
        </tr>
    </table>
    <hr>
    <h3>Логические операторы</h3>
    <p>
        <span class="code-word">AND</span>
        <span class="code-word">OR</span>
        <span class="code-word">NOT</span>
    </p>
    <hr>
    <h3>Приоритеты операторов</h3>
    <table class="list" aria-label="Приоритеты операторов">
        <thead>
        <tr>
            <th>Приоритет</th>
            <th>Оператор</th>
        </tr>
        </thead>
        <tr>
            <td>1</td>
            <td>
                <span class="code-word">(</span>
                <span class="code-word">)</span></td>
        </tr>
        <tr>
            <td>2</td>
            <td><span class="code-word">/</span>
                <span class="code-word">*</span></td>
        </tr>
        <tr>
            <td>3</td>
            <td><span class="code-word">+</span>
                <span class="code-word">-</span></td>
        </tr>
        <tr>
            <td>4</td>
            <td><span class="code-word">||</span></td>
        </tr>
        <tr>
            <td>5</td>
            <td><span class="code-word">=</span>
                <span class="code-word">&gt;</span>
                <span class="code-word">&lt;</span>
                <span class="code-word">&gt;=</span>
                <span class="code-word">&lt;=</span></td>
        </tr>
        <tr>
            <td>6</td>
            <td><span class="code-word">[NOT] LIKE</span>
                <span class="code-word">IS [NOT] NULL</span>
                <span class="code-word">[NOT] IN</span></td>
        </tr>
        <tr>
            <td>7</td>
            <td><span class="code-word">[NOT] BETWEEN</span></td>
        </tr>
        <tr>
            <td>8</td>
            <td><span class="code-word">!=</span>
                <span class="code-word">&lt;&gt;</span></td>
        </tr>
        <tr>
            <td>9</td>
            <td><span class="code-word">NOT</span></td>
        </tr>
        <tr>
            <td>10</td>
            <td><span class="code-word">AND</span></td>
        </tr>
        <tr>
            <td>11</td>
            <td><span class="code-word">OR</span></td>
        </tr>
    </table>
    <hr>
    <h3>ORDER BY</h3>
    <div class="code bold no_mb">
        <p>
            <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
            <span class="example--word">column(s)</span>&nbsp;alias,
            <span class="example--word">expression(s)</span>&nbsp;alias<span class="bad">}</span>
        </p>
        <p class="example--word">FROM&nbsp;table_name</p>
        <p> WHERE&nbsp;condition(s)</p>
        <p>
            ORDER&nbsp;BY&nbsp;<span class="bad">{</span><span
                class="example--word">column(s)</span><span class="bad">|</span><span
                class="example--word">expressions(s)</span><span class="bad">|</span><span
                class="example--word">numeric position</span><span class="bad">}</span>
            <span class="bad">{</span>ASC<span class="bad">|</span>DESC<span class="bad">}</span>
            <span class="bad">{</span>NULLS FIRST<span class="bad">|</span>LAST<span class="bad">}</span><span
                class="example--word">;</span>
        </p>
    </div>
    <p class="example">numeric position считается из select list'а</p>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter04">
    <h1>Раздел 4. <a href="">Функции</a><span class="update-time">16.05.2022 15:35</span></h1>
    <hr>
    <h3>Схема функций</h3>
    <div class="horizontal-schema horizontal-schema--design">
        <div>Function</div>
        <div>
            <div class="horizontal-schema horizontal-schema--design">
                <div>Single-row</div>
                <div>
                    <div><a href="#character">Character</a></div>
                    <div><a href="#numeric">Numeric</a></div>
                    <div><a href="#date">Date</a></div>
                    <div><a href="#conversion">Conversion</a></div>
                    <div><a href="#general">General</a></div>
                    <div><a href="#conditional">Conditional</a></div>
                </div>
            </div>
            <div>Multiple-row</div>
        </div>
    </div>

    <hr>
    <h2 class="no_mb" id="character"><a href="#chapter04">Character functions</a></h2>
    <p class="example">Функции которые работают с текстом</p>
    <div class="horizontal-schema horizontal-schema--design">
        <div>Character function</div>
        <div>
            <div>Case conversion function</div>
            <div>Character manipulation function</div>
        </div>
    </div>

    <h3>Case conversion functions</h3>
    <h4>Перевод в нижний регистр</h4>
    <span class="code-word example--word no_mb">LOWER(s)</span>
    <span class="example">, где s - строка.</span>
    <h4>Перевод в верхний регистр</h4>
    <span class="code-word example--word no_mb">UPPER(s)</span>
    <span class="example">, где s - строка.</span>
    <h4>Перевод в верхний регистр первой буквы</h4>
    <span class="code-word example--word no_mb">INITCAP(s)</span>
    <span class="example">, где s - строка.</span>
    <p class="example">Важно! Переводится первый символ каждого слова.</p>

    <h3>Character manipulation function</h3>
    <h4>Конкатенация</h4>
    <span class="code-word example--word">CONCAT(s,s)</span>
    <span class="example">, где s - строка. Аналогичен оператору </span>
    <span class="code-word">||</span>
    <h4>Длина строки</h4>
    <span class="code-word example--word">LENGTH(s)</span>
    <span class="example">, где s - строка.</span>
    <p class="example">Важно! Считаются все символы, включая проблелы и т.п.</p>
    <h4>Добавление символов (слева/справа)</h4>
    <span class="code-word example--word">LPAD(s, n, p)</span> и
    <span class="code-word example--word">RPAD(s, n, p)</span>
    <span class="example">где&nbsp;s&nbsp;-&nbsp;строка, n&nbsp;-&nbsp;конечная длинна текста, p&nbsp;-&nbsp;текст для заполнения.</span>
    <h4>Обрезка символов по краям</h4>
    <div class="code-word bold" style="white-space: normal;">
        <span class="example--word">TRIM(</span><span class="bad">{</span>trailing<span
            class="bad">|</span>leading<span class="bad">|</span>both<span class="bad">}</span>
        char&nbsp;FROM&nbsp;<span class="example--word">s)</span>
    </div>
    <p class="example no_mb">По умолчанию: тип удаления both, а символ для удаления - пробел.</p>
    <p class="example"> Важно: удалять можно только один какой-то символ.</p>
    <h4>Поиск в строке</h4>
    <div class="code-word" style="white-space: normal;">
        <span class="example--word">INSTR(s, searchString</span><span>, startPosition, nth&nbsp;occurrence</span><span
            class="example--word">)</span>
    </div>
    <p class="example no_mb">Где s - строка в которой ищем. searchString - искомый текст; startPosition - позиция с
        которой начинается поиск; <span style="white-space: nowrap">n-ное</span> появление;</p>
    <h4>Извлечение подстроки</h4>
    <span class="code-word" style="white-space: normal;">
            <span class="example--word">SUBSTR(s, startPosition</span><span>, n</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где s - строка в которой ищем. startPosition - позиция с которой начинаем извлекать;
        n&nbsp;-&nbsp;кол-во извлекаемых символов;</p>
    <p class="example no_mb">Если startPosition&lt;0 то позиция считается с конца s.</p>
    <p class="example">Важно: Если длина строки s меньше startPosition то функция вернет null.</p>
    <h4>Замена подстроки</h4>
    <div class="code-word" style="white-space: normal;">
        <span class="example--word">REPLACE(s, searchString</span><span>, replacementString</span><span
            class="example--word">)</span>
    </div>
    <p class="example no_mb">Где s - строка в которой производим замену. searchString - текст, который нужно заменить;
        replacementString - текст, на который нужно заменить;</p>
    <p class="example">Если replacementString не указан, то функция удалит searchString из s.</p>

    <hr>
    <h2 class="no_mb" id="numeric"><a href="#chapter04">Numeric functions</a></h2>
    <p class="example">Функции которые работают с числами</p>
    <h4>Округление</h4>
    <span class="code-word">
        <span class="example--word">ROUND(n</span>, precision<span class="example--word">)</span>
    </span>
    <p class="example">Математическое округление. При precision&lt;0 округляется целая часть.</p>
    <h4>Отбрасывание</h4>
    <span class="code-word">
        <span class="example--word">TRUNC(n</span>, precision<span class="example--word">)</span>
    </span>
    <p class="example">Отбрасывание числа. При precision&lt;0 происходит замена на 0 в целой части числа.</p>
    <h4>Остаток от деления</h4>
    <span class="code-word"><span class="example--word">MOD(dividend, divisor)</span></span>
    <p class="example">Интересно: можно использовать дробные числа.</p>

    <hr>
    <h2 class="no_mb" id="date"><a href="#chapter04">Date functions</a></h2>
    <p class="example">Функции для работы с датами</p>

    <p class="no_mb">При вычитании даты из даты получаем число <strong>кол-во дней</strong> между датами.</p>
    <p class="no_mb">Можно прибавлять/вычитать число в результате дата + число дней</p>
    <p>Складывать/делить/умножать даты нельзя.</p>

    <h4>Системное время</h4>
    <span class="code-word example--word">SYSDATE</span>
    <p class="example">Возвращает текущее время db-server'а</p>

    <h4>Разница между датами</h4>
    <div class="code-word example--word" style="white-space: normal">MONTHS_BETWEEN(start_date, finish_date)</div>
    <p class="example no_mb">Возвращает дробное число, кол-во месяцев между датами.</p>
    <p class="example no_mb">Стандарт oracle месяц = 31 день.</p>
    <p class="example">Если первый аргумент больше второго - возвращает отрицательное число.</p>

    <h4>Добавление к дате</h4>
    <span class="code-word example--word">ADD_MONTHS(date, number_of_months)</span>
    <p class="example no_mb">Добавление/вычитание кол-ва месяцев.</p>
    <p class="example">Дробная часть в аргументе игнорируется, т.е. добавляются только целые месяцы.</p>

    <h4>Поиск следующего дня недели</h4>
    <span class="code-word example--word">NEXT_DAY(date, day_of_the_week)</span>
    <p class="example no_mb">Где, date - дата, day_of_the_week - день недели.</p>
    <p class="example">Возвращает дату следующего указанного дня недели.</p>

    <h4>Поиск последнего дня месяца</h4>
    <span class="code-word example--word">LAST_DATE(date)</span>
    <p class="example">Возвращает дату, последний день месяца в указанной дате.</p>

    <h4>Округление даты</h4>
    <span class="code-word">
        <span class="example--word">ROUND(date</span><span>, date_precision_format</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где, date - дата, date_precision_format - точность округления*.</p>

    <h4>Отбрасывание даты</h4>
    <span class="code-word">
        <span class="example--word">TRUNC(date</span><span>, date_precision_format</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где, date - дата, date_precision_format - точность округления*.</p>

    <h4>Точность округления</h4>
    <table class="list" style="min-width: 320px;" aria-label="date_precision_format">
        <thead>
        <th>Код</th>
        <th>Граница</th>
        </thead>
        <tr>
            <td>CC</td>
            <td>век</td>
        </tr>
        <tr>
            <td>YYYY</td>
            <td>год</td>
        </tr>
        <tr>
            <td>Q</td>
            <td>четверть</td>
        </tr>
        <tr>
            <td>MM</td>
            <td>месяц</td>
        </tr>
        <tr>
            <td>W</td>
            <td>неделя</td>
        </tr>
        <tr>
            <td>DD</td>
            <td>день</td>
        </tr>
        <tr>
            <td>HH</td>
            <td>час</td>
        </tr>
        <tr>
            <td>MI</td>
            <td>минута</td>
        </tr>
    </table>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter05">
    <h1>Раздел 5. <a href="#">CONVERSION, GENERAL и CONDITIONAL функции</a><span
            class="update-time">28.05.2022 23:04</span></h1>
    <hr>
    <h2 class="no_mb" id="conversion"><a href="#chapter05">Conversion functions</a></h2>
    <p class="example">Функции конвертации данных из одного типа в другой</p>

    <h4>Конвертация числа в строку</h4>
    <div class="code-word" style="white-space: normal; display: inline-block">
        <span class="example--word">TO_CHAR(number</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= T</span>
    </div>
    <p class="example">Возвращает тип VARCHAR2</p>
    <table class="list no_mb" aria-label="форматы для чисел">
        <thead>
        <th>Элемент</th>
        <th>Описание</th>
        <th>Формат</th>
        <th>Число</th>
        <th>Текст</th>
        </thead>
        <tr>
            <td>9</td>
            <td>Ширина</td>
            <td>99999</td>
            <td>18</td>
            <td>18</td>
        </tr>
        <tr>
            <td>0</td>
            <td>Отображение нуля</td>
            <td>099999</td>
            <td>18</td>
            <td>000018</td>
        </tr>
        <tr>
            <td>.</td>
            <td>Позиция десятичной точки</td>
            <td>099999.99</td>
            <td>18.35</td>
            <td>000018.350</td>
        </tr>
        <tr>
            <td>D</td>
            <td>Позиция десятичного разделителя</td>
            <td>099999D999</td>
            <td>18.35</td>
            <td>000018.350</td>
        </tr>
        <tr>
            <td>,</td>
            <td>Позиция запятой</td>
            <td>099,999,999</td>
            <td>1234567</td>
            <td>001,234,567</td>
        </tr>
        <tr>
            <td>G</td>
            <td>Позиция разделителя групп</td>
            <td>099999G999</td>
            <td>1234567</td>
            <td>001,234,567</td>
        </tr>
        <tr>
            <td>$</td>
            <td>Знак $</td>
            <td>$099999</td>
            <td>18</td>
            <td>$000018</td>
        </tr>
        <tr>
            <td>L</td>
            <td>Локальная валюта</td>
            <td>L099999</td>
            <td>18</td>
            <td>$000018</td>
        </tr>
        <tr>
            <td>MI</td>
            <td>Позиция знака -</td>
            <td>099999MI</td>
            <td>-18</td>
            <td>000018-</td>
        </tr>
        <tr>
            <td>PR</td>
            <td>Скобки для отрицательных чисел</td>
            <td>099999PR</td>
            <td>-18</td>
            <td>&lt;000018&gt;</td>
        </tr>
        <tr>
            <td>S</td>
            <td>Префикс + или -</td>
            <td>S099999</td>
            <td>18</td>
            <td>+000018</td>
        </tr>
    </table>
    <p class="example">* Если число не влазит в формат получаем строку из символа #</p>

    <h4>Конвертация даты в строку</h4>
    <div class="code-word" style="white-space: normal; display: inline-block">
        <span class="example--word">TO_CHAR(date</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= T</span>
    </div>
    <p class="example">Возвращает тип VARCHAR2</p>
    <p></p>
    <table class="list no_mb" aria-label="форматы для даты" id="conversion_format">
        <thead>
        <th>Элемент</th>
        <th>Описание</th>
        <th>Текст</th>
        </thead>
        <tbody>
        <tr>
            <td>Y</td>
            <td>Последняя цифра года</td>
            <td>9</td>
        </tr>
        <tr>
            <td>YY</td>
            <td>Последние две цифры года</td>
            <td>19</td>
        </tr>
        <tr>
            <td>YYY</td>
            <td>Последние три цифры года</td>
            <td>019</td>
        </tr>
        <tr>
            <td>YYYY</td>
            <td>Год (целиком)</td>
            <td>2019</td>
        </tr>
        <tr>
            <td>RR</td>
            <td>Год в формате 2-х цифр</td>
            <td>19</td>
        </tr>
        <tr>
            <td>YEAR</td>
            <td>Буквенное описание года <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>TWENTY NINETEEN</td>
        </tr>
        <tr>
            <td>MM</td>
            <td>Месяц в формате 2-х цифр</td>
            <td>09</td>
        </tr>
        <tr>
            <td>MON</td>
            <td>Месяц в формате 3-х букв <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>SEP</td>
        </tr>
        <tr>
            <td>MONTH</td>
            <td>Буквенное написание месяца <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>SEPTEMBER</td>
        </tr>
        <tr>
            <td>D</td>
            <td>День недели</td>
            <td>6</td>
        </tr>
        <tr>
            <td>DD</td>
            <td>День месяца: две цифры</td>
            <td>20</td>
        </tr>
        <tr>
            <td>DDD</td>
            <td>День года</td>
            <td>263</td>
        </tr>
        <tr>
            <td>DY</td>
            <td>День недели: три буквы <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>FRI</td>
        </tr>
        <tr>
            <td>DAY</td>
            <td>День недели: текстовое название <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>FRIDAY</td>
        </tr>
        <tr>
            <td>W</td>
            <td>Неделя месяца</td>
            <td>3</td>
        </tr>
        <tr>
            <td>WW</td>
            <td>Неделя года</td>
            <td>38</td>
        </tr>
        <tr>
            <td>Q</td>
            <td>Квартал года</td>
            <td>3</td>
        </tr>
        <tr>
            <td>СС</td>
            <td>Век</td>
            <td>21</td>
        </tr>
        <tr>
            <td>AM, PM, A.M.,&nbsp;P.M.</td>
            <td>Индикатор</td>
            <td>PM</td>
        </tr>
        <tr>
            <td>HH, HH12 и HH24</td>
            <td>Формат времени</td>
            <td>04, 04, 16</td>
        </tr>
        <tr>
            <td>MI</td>
            <td>Минуты</td>
            <td>17</td>
        </tr>
        <tr>
            <td>SS</td>
            <td>Секунды</td>
            <td>38</td>
        </tr>
        <tr>
            <td>SSSSS</td>
            <td>Секунды после полуночи</td>
            <td>58638</td>
        </tr>
        <tr>
            <td>- / . , ? # !</td>
            <td>Пунктуация: 'MM.YY'</td>
            <td>09.19</td>
        </tr>
        <tr>
            <td>"Текст"</td>
            <td>'"Quarter " Q " of " Year'</td>
            <td>Quarter 3 of Twenty Nineteen</td>
        </tr>
        <tr>
            <td>TH</td>
            <td>'DDth " of " Month'</td>
            <td>20TH of September</td>
        </tr>
        <tr>
            <td>SP</td>
            <td>Буквенное написание 'MmSp Month Yyyysp'</td>
            <td>Nine September Two Thousand Nineteen</td>
        </tr>
        <tr>
            <td>THSP, SPTH</td>
            <td>Комбинация 'hh24SpTh'</td>
            <td>sixteenth</td>
        </tr>
        </tbody>
    </table>
    <p class="example">* Если появляются лишние пробелы, то перед шаблоном надо использовать
        <span class="code-word">fm</span>, т.е. ,например, fmMON</p>

    <h4>Конвертация из строки в дату</h4>
    <div class="code-word" style="white-space: normal; display: inline-block">
        <span class="example--word">TO_DATE(text</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= D</span>
    </div>
    <p class="example">Используем те же <a href="#conversion_format">маски</a></p>

    <h4>Конвертация текста в строку</h4>
    <div class="code-word" style="white-space: normal; display: inline-block">
        <span class="example--word">TO_NUMBER(text</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= N</span>
    </div>
    <p class="example">Используем те же <a href="#conversion_format">маски</a></p>

    <hr>
    <h2 class="no_mb" id="general"><a href="#chapter05">General functions</a></h2>
    <p class="example">Для упрощения работы с NULL</p>

    <h4>Проверка на NULL с дефолтным значением</h4>
    <span class="code-word example--word">NVL(value, if_null)</span>
    <p class="example">Если if_null = null вернется null</p>

    <h4>Проверка на NULL с дефолтными значениями</h4>
    <span class="code-word example--word">NVL2(value, if_not_null, if_null)</span>
    <p class="example">Парамтры if_not_null и if_null должны быть одного типа (или автоматически приводимы), но не могут
        быть Long.</p>

    <h4>Сравнение с возвратом NULL</h4>
    <span class="code-word example--word">NULLIF(value1, value2)</span>
    <p>Если параметры <strong>равны</strong> возвращается NULL, если <strong>неравны</strong> - первый параметр.</p>

    <h4>Возврат значения если не NULL</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">COALESCE(val1, val2</span>, ..., valN<span class="example--word">)</span>
    </span>
    <p class="example no_mb">Возвращает первое значение из списка не равное NULL.</p>
    <p class="example">Если все параметры NULL, то будет возвращен NULL.</p>

    <hr>
    <h2 class="no_mb" id="conditional"><a href="#chapter05">Conditional functions</a></h2>
    <p class="example">Функции if-then-else логики</p>

    <h4>Каскадное сравнение (похоже на CASE)</h4>
    <div class="code-word" style="white-space: normal">
        <span class="example--word">DECODE(expr, comp1, if_true1</span>, comp2,&nbsp;if_true2, ..., comp2,&nbsp;if_trueN,
        if_else<span
            class="example--word">)</span>
    </div>
    <p class="example no_mb">Чисто oracle фишка, в чистом SQL ее нет.</p>
    <p class="example">Выражение expr сравнивается с comp1, если совпадает - возвращает if_true1. И так N раз. Если нет
        не одного совпадения возвращает if_else. Если if_else не указан - вернется NULL.</p>


    <h4>Simple CASE</h4>
    <div class="code-word">
        <p class="example--word">CASE expr</p>
        <p class="example--word">WHEN comp1 THEN if_true1</p>
        <p>WHEN comp2 THEN if_true2</p>
        <p>...</p>
        <p>WHEN compN THEN if_trueN</p>
        <p>ELSE if_false</p>
        <p class="example--word">END</p>
    </div>
    <p class="example">Сравниваем expr с разными comp.</p>

    <h4>Searched CASE</h4>
    <div class="code-word">
        <p class="example--word">CASE</p>
        <p class="example--word">WHEN cond1 THEN if_true1</p>
        <p>WHEN cond2 THEN if_true2</p>
        <p>...</p>
        <p>WHEN condN THEN if_trueN</p>
        <p>ELSE if_false</p>
        <p class="example--word">END</p>
    </div>
    <p class="example">Отсутствует expr, т.е. внутри cond мы можен сравнивать что угодно.</p>

    <p class="main-mind">В обоих случах, если нет if_false и ни одно из условий не выполнилось вернется NULL</p>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter06">
    <h1 class="no_mb">Раздел 6. <a href="#">GROUP&nbsp;функции</a><span class="update-time">01.06.2022 17:58</span></h1>
    <p class="example">Group или Multiple-row работают с агрегированной информацией</p>

    <h4 class="no_mb">COUNT</h4>
    <p class="example no_mb">подсчет по любому типу, null значения игнорируются</p>
    <div class="code-word no_mb" style="white-space: normal; display: inline-block">
        <span class="example--word">COUNT(</span><span class="bad">{</span>*<span class="bad">| {</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="bad">}</span><span class="example--word">)</span>
    </div>
    <p class="example">expression - выражение или столбец</p>

    <h4 class="no_mb">SUM</h4>
    <p class="example no_mb">сумма, на вход только числовые значения, null значения игнорируются</p>
    <span class="code-word">
        <span class="example--word">SUM(</span><span class="bad">{</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="example--word">)</span>
    </span>
    <p class="example">expression - выражение или столбец</p>

    <h4 class="no_mb">AVG</h4>
    <p class="example no_mb">среднее арифметическое, на вход только числовые значения, null значения игнорируются</p>
    <span class="code-word">
        <span class="example--word">AVG(</span><span class="bad">{</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="example--word">)</span>
    </span>

    <h4 class="no_mb">MAX и MIN</h4>
    <p class="example no_mb">максимальное и минимальное, на вход можно число, дату и строку</p>
    <span class="code-word">
        <span class="example--word">MAX(</span><span class="bad">{</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="example--word">)</span>
    </span><span
        style="display: inline-block; text-align: center; margin: 5px;">и</span><span
        class="code-word">
        <span class="example--word">MIN(</span><span class="bad">{</span>DISTINCT<span
        class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
        class="example--word">)</span>
    </span>
    <p></p>
    <hr>
    <h2>GROUP BY и HAVING</h2>
    <h4 class="no_mb">Вид SELECT'а с группировкой:</h4>
    <div class="code bold no_mb">
        <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
        <span class="example--word">column(s)</span>&nbsp;alias,
        <span class="example--word">expression(s)</span>&nbsp;alias, group_func(s)&zwj;(<span class="example--word">column</span><span
            class="bad">|</span><span class="example--word">expression</span> alias)<span class="bad">}</span><br>
        <span class="example--word">FROM&nbsp;table_name</span>
        <br>WHERE&nbsp;condition(s)
        <br>GROUP&nbsp;BY&nbsp;<span class="bad">{</span><span
            class="example--word">column(s)</span><span class="bad">|</span><span
            class="example--word">expressions(s)</span><span class="bad">}</span>
        <br>HAVING group_condition(s)
        <br>ORDER&nbsp;BY <span class="bad">{</span><span
            class="example--word">column(s)</span><span class="bad">|</span><span
            class="example--word">expressions(s)</span><span class="bad">|</span><span
            class="example--word">numeric&nbsp;position</span><span class="bad">}</span>
        <span class="bad">{</span>ASC<span class="bad">|</span>DESC<span class="bad">}</span>&nbsp;<span
            class="bad">{</span>NULLS&nbsp;FIRST<span class="bad">|</span>LAST<span class="bad">}</span><span
            class="example--word">;</span>
    </div>
    <p class="example no_mb">При группировке указывать алиас нельзя, только название столбца.</p>
    <p class="example">HAVING работает с группами, если нет GROUP BY, то он работает с текущей группой
        (но так лучше не делать и использовать в паре).</p>
    <p class="main-mind">Максимальная вложенность multiple-row функций = 2.</p>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter07">
    <h1>Раздел 7. <a href="#">JOIN</a><span class="update-time">22.10.2022 22:38</span></h1>
    <div class="after-h1">

    </div>
    <h3>Типы(группы)</h3>
    <div class="horizontal-schema horizontal-schema--design" id="join">
        <div>JOIN</div>
        <div>
            <div><a href="#join_inner">INNER JOIN (NATURAL JOIN)</a></div>
            <div><a href="#join_outer">OUTER JOIN</a></div>
            <div><a href="#join_cross">CROSS JOIN</a></div>
        </div>
    </div>
    <p class="no_mb">еще</p>
    <div class="horizontal-schema horizontal-schema--design">
        <div>JOIN</div>
        <div>
            <div>EQUIJOIN</div>
            <div>NONEEQUIJOIN</div>
        </div>
    </div>
    <div class="tab-3">
        <p class="no_mb">
            <span class="example--word">EQUIJOIN</span>
            - это объединения в условиях которых используется равенство критериев.
        </p>
        <p>
            <span class="example--word">NONEEQUIJOIN</span>
            - если в условии не равенство, сравнение, between, ...
        </p>
    </div>
    <p class="no_mb">и отдельно</p>
    <div class="horizontal-schema horizontal-schema--design mb20">
        <a href="#join_oracle">ORACLE JOIN SYNTAX</a>
    </div>

    <hr>
    <div id="join_inner">
        <h3><a href="#chapter07">INNER JOIN (NATURAL JOIN)</a></h3>
        <p class="main-mind">
            В INNER JOIN результат попадают только строки удовлетворяющие условию объединения.
            Иные не выводятся!!!
        </p>
        <h4 class="no_mb">Типы INNER JOIN:</h4>
        <div class="horizontal-schema horizontal-schema--design">
            <div>INNER JOIN<br>(NATURAL&nbsp;JOIN)</div>
            <div>
                <div><a href="#join_natural">NATURAL&nbsp;JOIN</a></div>
                <div><a href="#join_using">USING</a></div>
                <div><a href="#join_on">ON</a></div>
            </div>
        </div>
        <div id="join_natural">
            <h4><a href="#join_inner">NATURAL JOIN</a></h4>
            <p>Таблица к, которой присоединяем называется
                <span class="example--word">source</span>,
                та в которой ищем -
                <span class="example--word">target</span>.
            </p>
            <p class="no_mb">Объединяет по столбцам с одинаковыми именами, т.е. не дает выбрать критерий.</p>
            <p class="example no_mb">Если несколько столбцов, то объединение пойдет по всем.</p>
            <p class="example">Если нет столбцов с одинаковыми именами произойдет CROSS JOIN.</p>
            <p class="no_mb">При соединении поиск проходит по всем строкам таргета, а не останавливается когда
                совпало.</p>
            <p>Поэтому может быть несколько совпадений!!!</p>
            <p>Если в таргете не найдено совпадения, но в результат строка не попадает.</p>
            <div class="code bold no_mb">
                <p>SELECT column(s)</p>
                <p>FROM table_1 </p>
                <p>NATURAL JOIN table_2;</p>
            </div>
            <p class="example">Если нужно в селект листе указать столбец, по которому происходит объединение,
                то он указывается без имени таблицы или алиаса таблицы (иначе ошибка)</p>
        </div>
        <div id="join_using">
            <h4><a href="#join_inner">INNER JOIN with USING</a></h4>
            <div class="code bold no_mb">
                <p>SELECT column(s)</p>
                <p>FROM table_1</p>
                <p>JOIN table_2 USING (column(s));</p>
            </div>
            <p class="example no_mb">В скобках указываем имена столбцов, по которым хотим произвести объединение.</p>
            <p class="example">Если указать все одинаковые какие есть, то результат будет такой же как у
                NATURAL&nbsp;JOIN.</p>
        </div>
        <div id="join_on">
            <h4><a href="#join_inner">INNER JOIN with ON</a></h4>
            <div class="code bold">
                <p>SELECT column(s)</p>
                <p>FROM table_1</p>
                <p>JOIN table_2 ON (column1 = column1));</p>
            </div>
        </div>
    </div>

    <hr>
    <div id="join_outer">
        <h3><a href="#chapter07">OUTER JOIN</a></h3>
        <p class="main-mind">
            В OUTER JOIN попадают также строки которы не соответствуют условию объединения.
            Какие определяется типом запроса.
            Очень часто используется в реальной жизни.
        </p>
        <h4>Типы:</h4>
        <p><span class="example--word">LEFT OUTER JOIN</span>
            - выводится результат INNER JOIN, а потом добавляются все строки
            из левой таблицы,
            по которым условие не было соблюдено.</p>
        <p><span class="example--word">RIGHT OUTER JOIN</span>
            - выводится результат INNER JOIN, а потом добавляются все строки
            из правой таблицы,
            по которым условие не было соблюдено.</p>
        <p><span class="example--word">FULL OUTER JOIN</span>
            - выводится результат INNER JOIN, а потом добавляются все строки
            из левой таблицы, а потом из правой,
            по которым условие не было соблюдено.</p>
        <div class="code bold">
            <p>SELECT column(s)</p>
            <p>FROM table_1</p>
            <p>LEFT|RIGHT|FULL OUTER JOIN table_2</p>
            <p>ON (column1 = column2);</p>
        </div>
    </div>

    <hr>
    <div id="join_cross">
        <h3><a href="#chapter07">CROSS JOIN</a></h3>
        <p class="no_mb">
            По факту, это объединение всех строк одной таблицы со всеми строками другой.
        </p>
        <p class="example">Т.е. если в первой 25 строк, во второй - 5, то в итоге 100</p>
        <div class="code bold">
            <p>SELECT column(s)</p>
            <p>FROM table_1</p>
            <p>CROSS JOIN table_2;</p>
        </div>
        <p>
            Это еще называют -
            Cartesian product или Декартово произведение
        </p>
    </div>

    <hr>
    <div id="join_oracle">
        <h3><a href="#chapter07">ORACLE JOIN SYNTAX</a></h3>
        <h4 class="no_mb">INNER JOIN</h4>
        <p class="no_mb">Таблицы через запятую, условие объединения в WHERE.</p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2 </p>
            <p>WHERE t1.column1 = t2.column2;</p>
        </div>
        <h4 class="no_mb">RIGHT OUTER JOIN</h4>
        <p class="main-mind mb02">
            Для OUTER JOIN используем оператор соединения
            <span class="code-word">(+)</span>
            в условии в WHERE, который указывает на то, какая из таблиц является таблицей добавления.
            Т.е. строки из этой таблицы попадают в результат только при соответствии условию.
        </p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2 </p>
            <p>WHERE t1.column1(+) = t2.column2;</p>
        </div>
        <h4 class="no_mb">LEFT OUTER JOIN</h4>
        <p class="mb02">Аналогично используем <span class="code-word">(+)</span>, только с другой стороны.</p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2 </p>
            <p>WHERE t1.column1 = t2.column2(+);</p>
        </div>
        <h4 class="no_mb">CROSS JOIN</h4>
        <p class="no_mb">Просто указываем таблицы через запятую.</p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2;</p>
        </div>
        <h4 class="no_mb">FULL OUTER JOIN</h4>
        <p>
            С помощью oracle синтаксиса
            <span class="example--word bad">сделать нельзя</span>
            - надо использовать базовый синтаксис SQL.
        </p>
    </div>

</section>

<section class="container" id="chapter08">
    <h1>Раздел 8. <a href="#">SUBQUERY</a><span class="update-time">27.10.2022 11:14</span></h1>
    <h4>Типы подзапросов:</h4>
    <div class="horizontal-schema horizontal-schema--design mb20">
        <div>SUBQUERIES</div>
        <div>
            <div class="horizontal-schema horizontal-schema--single ">
                <div>SINGLE ROW</div>
                <div>
                    <div>SCALAR</div>
                </div>
            </div>
            <div>MULTIPLE ROW</div>
        </div>
    </div>
    <div class="mb20">
        <p class="example--word no_mb">SINGLE ROW</p>
        <p>Возвращает одну строку.</p>
        <p class="example--word no_mb">SCALAR</p>
        <p>Частный случай SINGLE ROW, когда возвращается одна строка и один столбец.</p>
        <p class="example--word no_mb">MULTIPLE ROW</p>
        <p>Результат - несколько строк.</p>
    </div>
    <p class="main-mind">
        Не зависимо от типа подзапрос один раз выполняется и запоминается. Дальше используется сохраненное значение.
    </p>
    <hr>
    <h4>CORRELATED SUBQUERIES</h4>
    <p class="no_mb">Такие подзапросы, которые связаны с внешним подзапросом.</p>
    <p class="example с">
        Т.е. если в подзапросе используется что-то из данных текущей строки, а не агрегированное.
        Т.е. то, что требует пересчета для каждой строки.
    </p>
    <p class="main-mind">
        Коррелированные запросы выполняются каждый раз. (что&nbsp;ресурсоемко!)
    </p>

    <a href="#" class="button button--top"></a>
</section>

<section class="container" id="chapter09">
    <h1>
        Раздел 9. <a href="#">SET&nbsp;operators <span class="smaller">(Операторы множеств)</span></a>
        <span class="update-time">27.11.2022 11:17</span>
    </h1>

    <hr>
    <div>
        <p>
            <span class="example--word">COMPOUND QUERY</span>
            - сложный запрос. Состоит из нескольких <span class="example--word smaller">SELECT</span>'ов,
            которые не являются <span class="example--word smaller">SUBQUERY</span>.
        </p>
        <p></p>
        <div class="code bold">
            <p>SELECT x FROM table1</p>
            <p>UNION</p>
            <p>SELECT y FROM table2</p>
        </div>
    </div>

    <hr>
    <div>
        <div class="horizontal-schema horizontal-schema--design">
            <div>SET OPERATORS</div>
            <div>
                <div>UNION</div>
                <div>UNION ALL</div>
                <div>INTERSECT</div>
                <div>MINUS</div>
            </div>
        </div>
        <div>
            <p>
                <span class="example--word">UNION ALL</span>
                - просто объединяет, не производя никаких действий.
            </p>
        </div>
        <div>
            <p>
                <span class="example--word">UNION</span>
                - сортирует (естественным путем), удаляет дубликаты и объединяет. Результат тоже сортирован.
            </p>
        </div>
        <div>
            <p>
                <span class="example--word">INTERSECT</span>
                - пересечение. Находит общие значения во множествах, исключает дубликаты и сортирует результат.
            </p>
        </div>
        <div>
            <p class="no_mb">
                <span class="example--word">MINUS</span>
                - оставляет те значения из первого множества, которых нет во втором. Также убирает дубликаты и делает
                сортировку.
            </p>
            <p class="example">
                В класcическом SQL оператор называется EXCEPT.
            </p>
        </div>
        <p class="main-mind no_mb">Важно: сортировка множеств происходит с самого начала.</p>
        <p class="main-mind">Если заведомо известно, что дубликатов нет, то лучше всего использовать UNION ALL.</p>
    </div>

    <hr>
    <div>
        <h4 class="no_mb">Условия</h4>
        <ul>
            <li>В результатах select'ов должно совпадать кол-во столбцов.</li>
            <li>
                <p class="no_mb">В столбцах должны совпадать типы данных (или должны быть из одного семейства).</p>
                <p class="example no_mb">Пример: </p>
                <p class="example no_mb">SELECT1 = DATE, INTEGER, VARCHAR2</p>
                <p class="example no_mb">SELECT2 = TIMESTAMP, NUMBER, CHAR</p>
                <p class="example no_mb">В результате будут выбраны наиболее широкие(точные) типы:</p>
                <p class="example">RESULT = TIMESTAMP, NUMBER, VARCHAR2</p>
            </li>
        </ul>
    </div>

    <hr>
    <div>
        <h4 class="no_mb">Сортировка результата</h4>
        <p class="no_mb">
            Если не устаивает стандартная сортировка (сортируются все столбцы в натуральном порядке),
            то после можно использовать простой <span class="example--word">ORDER BY</span>.
        </p>
        <div class="code bold no_mb">
            <p>SELECT x FROM table1</p>
            <p>UNION</p>
            <p>SELECT y FROM table2</p>
            <p>ORDER BY name DESC</p>
        </div>
        <p class="example">Сортировать можно только конечный результат.</p>

        <p class="no_mb">Если в селект-листе указана звездочка, то для сортировки нельзя использовать имя столбца:</p>
        <div class="code bold">
            <p>SELECT * FROM table1</p>
            <p>UNION</p>
            <p>SELECT * FROM table2</p>
            <p>ORDER BY name DESC <span>// Будет ошибка</span></p>
        </div>
        <p class="no_mb">Однако!!! Сортировку можно выполнить по номеру столбца:</p>
        <div class="code bold">
            <p>SELECT * FROM table1</p>
            <p>UNION</p>
            <p>SELECT * FROM table2</p>
            <p>ORDER BY 3 DESC <span>// Будет отсортировано по третьему столбцу</span></p>
        </div>
    </div>

    <hr>
    <div>
        <h4 class="no_mb">Алиасы</h4>
        <p>В результат попадают алиасы из первого select'а. Из второго игнорируются.</p>
    </div>

    <hr>
    <div>
        <h4>Важно</h4>
        <p>Можно использовать несколько set операторов.</p>
        <p>Выполняются последовательно.</p>
        <p>Изменить приоритет можно с использованием скобок.</p>
    </div>

    <a href="#" class="button button--top"></a>

</section>

<section class="container" id="chapter10">
    <h1>Раздел 10. <a href="#">DML&nbsp;команды</a>
        <span class="update-time">29.11.2022 11:30</span>
    </h1>

    <div id="dml">
        <div>
            <div class="horizontal-schema horizontal-schema--design">
                <div><a href="#sql_commands">DML Команды</a></div>
                <div>
                    <div><a href="#chapter02">SELECT</a></div>
                    <div><a href="#insert">INSET</a></div>
                    <div><a href="#update">UPDATE</a></div>
                    <div><a href="#delete">DELETE</a></div>
                    <div><a href="#merge">MERGE</a></div>
                </div>
            </div>
        </div>
    </div>
    <p class="no_mb">Select рассматривали ранее. Он самый большой и часто используемый.</p>
    <p>Далее все остальные команды.</p>

    <hr>
    <div id="insert">
        <h3 class="no_mb"><a href="#dml">INSERT</a></h3>
        <p>Вставляет одну или несколько строк в таблицу.</p>
        <div class="code bold">
            <p><span class="example--word">INSERT INTO table_name</span> (column(s))</p>
            <p><span class="example--word">VALUES (value(s));</span></p>
        </div>
        <p class="no_mb">Если не использовать название колонок, то необходимо в запросе указать данные для всех
            столбцов.</p>
        <p class="no_mb">Причем порядок в значениях должен быть такой же, как и у колонок.</p>
        <p>Если указываются имена столбцов, то порядок значений должен быть такой, как запросе.</p>
        <p>
            Правило хорошего тона: всегда использовать названия столбцов. Т.к. если в таблицу будет добавлено
            новое поле, то запрос без указания колонок перестанет работать, а с указанием - нет.
        </p>
        <p class="no_mb"> Для вставки лучше сразу в запросе использовать функции.</p>
        <p class="example no_mb">На пример: INITCAP() - первая буква большая, UPPER() - все буквы большие.</p>
        <p class="example no_mb">Но самое главное - конвертация времени, например: </p>
        <p class="example no_mb">TO_DATE('28-NOW-2022', 'DD-MON-YYYY')</p>
        <p class="example">
            Потому что, если в базе изменят формат, то автоконвертация из строки в дату может не сработать.
        </p>
        <p class="no_mb">Так же можно вставлять несколько строк:</p>
        <div class="code bold">
            <p><span class="example--word">INSERT INTO table_name</span> (column(s))</p>
            <p><span class="example--word">SUBQUERY;</span></p>
        </div>
        <p>Еще можно вставлять в несколько таблиц, но это этим обычно не пользуются. </p>
    </div>

    <hr>
    <div id="update">
        <h3 class="no_mb"><a href="#dml">UPDATE</a></h3>
        <p class="no_mb">Изменение информации в уже имеющихся строках.</p>
        <p class="example no_mb">Может менять одну или несколько строк, а так же один или несколько столбцов.</p>
        <p class="example">Не может изменять данные в нескольких таблицах.</p>
        <div class="code bold">
            <p class="example--word">UPDATE table_name</p>
            <p><span class="example--word">SET column</span>(s)<span class="example--word">=value</span>(s)</p>
            <p>WHERE condition(s)<span class="example--word">;</span></p>
        </div>
        <p class="no_mb">Возможно использование SUBQUERY</p>
        <div class="code bold">
            <p class="example--word">UPDATE table_name</p>
            <p><span class="example--word">SET column</span>(s)<span class="example--word">=subquery</span>(s)</p>
            <p>WHERE column=subquery<span class="example--word">;</span></p>
        </div>
    </div>

    <hr>
    <div id="delete">
        <h3 class="no_mb"><a href="#dml">DELETE</a></h3>
        <p class="no_mb">Удаляет строки из таблицы.</p>
        <p class="example no_mb">Удаляет строку полностью.</p>
        <p class="example">Может удалить одну или несколько строк.</p>
        <div class="code bold">
            <p class="example--word">DELETE</p>
            <p class="example--word">FROM table_name</p>
            <p>WHERE conditions<span class="example--word">;</span></p>
        </div>
        <p>Использование SUBQUERY возможно только в WHERE</p>
        <div class="code bold">
            <p class="example--word">DELETE</p>
            <p class="example--word">FROM table_name</p>
            <p>WHERE column=subquery<span class="example--word">;</span></p>
        </div>
    </div>

    <hr>
    <div id="merge">
        <h3><a href="#dml">MERGE</a></h3>
        <p class="no_mb">Может совмещать предыдущие операторы</p>
        <p>Используется очень редко.</p>
        <div class="code bold">
            <p><span class="example--word">MERGE INTO table_name1</span> t1</p>
            <p>
                <span class="example--word">USING</span>
                <span class="bad">{</span><span class="example--word">table_name2</span><span class="bad">|</span><span
                    class="example--word">subquery</span><span class="bad">}</span>
                t2
            </p>
            <p class="example--word">ON (t1.column=t2.column)</p>
            <p class="example--word">WHEN MATCHED THEN</p>
            <p>UPDATE SET column=value</p>
            <p>DELETE WHERE condition</p>
            <p class="example--word">WHEN NOT MATCHED THEN</p>
            <p>INSERT (value1, value2)</p>
            <p>VALUES (column1, column2)</p>
        </div>
    </div>

    <a href="#" class="button button--top"></a>

</section>

<section class="container" id="chapter11">
    <h1>Раздел 11. <a href="#">TCL&nbsp;команды</a>
        <span class="update-time">28.12.2022 22:55</span>
    </h1>

    <div id="tcl">
        <div class="horizontal-schema horizontal-schema--design mb20">
            <div><a href="#sql_commands">TCL команды</a></div>
            <div>
                <div><a href="#commit">COMMIT</a></div>
                <div><a href="#rollback">ROLLBACK</a></div>
                <div><a href="#save_point">SAVEPOINT</a></div>
            </div>
        </div>
    </div>

    <hr>
    <div id="acid">
        <h3>Принципы ACID</h3>
        <p class="no_mb"><span class="bold good">ATOMICITY</span> - атомарность</p>
        <p class="example">
            Транзакция атомарна(неделима). Т.е. либо выполняются все DML команды внутри транзакции,
            либо не выполняется ни одна.
        </p>
        <p class="no_mb"><span class="bold good">CONSISTENCY</span> - консистентность</p>
        <p class="example">
            При запуске SELECT учитывается только состояние таблицы на момент запуска.
        </p>
        <p class="no_mb"><span class="bold good">ISOLATION</span> - изолированность</p>
        <p class="example">Изменения видны другим пользователям только после завершения транзакции.</p>
        <p class="no_mb"><span class="bold good">DURABLE</span> - долговечность</p>
        <p class="example">После окончания транзакции данные не могут быть потеряны.</p>
    </div>

    <hr>
    <div id="transaction">
        <h3>Транзакции</h3>
        <p class="no_mb">
            Транзакция запускается непосредственно перед стартом DML команды:
            <span class="code-word">INSET</span>,
            <span class="code-word">UPDATE</span>,
            <span class="code-word">DELETE</span> или&nbsp;<span class="code-word">MERGE</span>.
        </p>
        <p class="example">Транзакция запускается не явно, и нет никакой команды для запуска транзакции</p>
        <p>При наличии открытой транзакции, DML команды не открывают новую, а выполняются в уже открытой.</p>
        <p class="no_mb">
            Транзакция закрывается только тогда будет вызваны
            <span class="code-word">COMMIT</span> или&nbsp;<span class="code-word">ROLLBACK</span>.
        </p>
        <p>Важно!!! <span class="code-word">SAVEPOINT</span> не завершает транзакцию.
        <p>Транзакция не связана ни с какой таблицей.</p>
        <p>Любая DDL или DCL команда завершают транзакцию коммитом.</p>
        <p>
            Важно!!! Когда выходишь из тула происходит закрытие транзакции,
            а вот чем (commit или rollback) зависит от настроек.
        </p>
        <p>Также закрытие транзакции происходит при завершении сессии (тут только rollback).</p>
    </div>

    <hr>
    <div id="commit">
        <h3><a href="#tcl">COMMIT</a></h3>
        <p class="main-mind">Сохранение внесенных изменений.</p>
        <p>Самая простая комманда в SQL</p>
        <div class="code example--word">COMMIT;</div>
        <p>Работает очень быстро.</p>
    </div>

    <hr>
    <div id="rollback">
        <h3><a href="#tcl">ROLLBACK</a></h3>
        <p class="main-mind">Отмена внесенных изменений.</p>
        <div class="code bold mb10">
            <p>
                <span class="example--word">ROLLBACK</span>
                TO SAVEPOINT savepoint_name<span class="example--word">;</span>
            </p>
        </div>
        <p>Может выполняться значительное время.</p>
        <p class="no_mb">Важно!!!</p>
        <p class="no_mb">ROLLBACK без параметров заканчивает транзакцию.</p>
        <p>ROLLBACK TO SAVEPOINT не заканчивает транзакцию.</p>
    </div>

    <hr>
    <div id="save_point">
        <h3><a href="#tcl">SAVEPOINT</a></h3>
        <p class="main-mind">Это маркер, который используется при ROLLBACK'е.</p>
        <div class="code example--word">SAVEPOINT savepoint_name;</div>
        <p class="no_mb">Создается в текущей транзакции.</p>
        <p>После закрытия транзакции - уничтожается.</p>
        <a href="#" class="button button--top"></a>
        <p class="main-mind">SAVEPOINT не является стандартной командой SQL</p>
    </div>

    <hr>
    <div id="autocommit">
        <h3>AUTOCOMMIT</h3>
        <p>Если очень хочется что-бы после каждой DML команды проходил коммит то можно использовать следующе:</p>
        <div class="code-word mb10">SET AUTOCOMMIT {ON|OFF};</div>
        <p class="main-mind">Но лучше это никогда не использовать!</p>
    </div>

    <hr>
    <div id="select_for_update">
        <h3>SELECT FOR UPDATE</h3>
        <div class="code bold">
            <p><span class="example--word">SELECT *</span></p>
            <p><span class="example--word">FROM&nbsp;table_name</span></p>
            <p><span class="example--word">...</span></p>
            <p><span class="example--word">FOR UPDATE;</span></p>
        </div>
        <p>На все выведенные строки будет поставлен lock, и при попытке изменить эти данные из другой сессии произойдет
            "зависание", до тех пор пока не будет снят lock.</p>
        <p>Lock будет снят при закрытии транзакции, в которой он был вызван.</p>
    </div>

</section>

<section class="container" id="chapter12">
    <h1>Раздел 12. <a href="#">DDL&nbsp;Команды: Работа с&nbsp;таблицами</a></h1>
    <div>
        <p class="tab-1"><a href="#create_table">Создание таблиц</a></p>
        <p class="tab-1"><a href="#altering_table">Изменение таблиц</a></p>
        <p class="tab-1"><a href="#truncate">Опустошение таблиц</a></p>
        <p class="tab-1"><a href="#drop">Удаление таблиц</a></p>
    </div>

    <hr>
    <div id="create_table">
        <h3><a href="#chapter12">Создание таблиц</a></h3>
        <div class="code bold">
            <p>
                <span class="example--word">CREATE TABLE</span>
                schema.<span class="example--word">table</span> ORGANIZATION HEAP
            </p>
            <p><span class="example--word">(column_name datatype</span> DEFAULT expr,</p>
            <p>column_name datatype DEFAULT expr,</p>
            <p>...<span class="example--word">);</span></p>
        </div>
        <h4>Создание таблицы с использованием SUBQUERY</h4>
        <div class="code bold no_mb">
            <span class="example--word">CREATE TABLE </span>
            schema.<span class="example--word">table AS subquery;</span>
        </div>
        <p class="example">Таблица будет сожержать результат запроса.</p>
    </div>

    <hr>
    <div id="altering_table">
        <h3><a href="#chapter12">Изменение таблиц</a></h3>

        <p class="bold no_mb">Добавление столбца</p>
        <div class="code bold">
            <p>ALTER TABLE table_name</p>
            <p>ADD (column_name data_type DEFAULT expr);</p>
        </div>

        <p class="bold no_mb">Изменение столбца</p>
        <div class="code bold no_mb">
            <p>ALTER TABLE table_name</p>
            <p>MODIFY (column_name data_type DEFAULT expr);</p>
        </div>
        <p class="example">Нельзя изменить если может быть нарушение целосности данных.</p>

        <p class="bold no_mb">Удаление столбца</p>
        <div class="code bold no_mb">
            <p>ALTER TABLE table_name</p>
            <p>DROP COLUMN column_name;</p>
        </div>
        <p class="example">Нельзя удалить если на этот столбец что-то ссылается.</p>

        <p class="bold no_mb">Неиспользуемые столбцы</p>
        <div class="code bold no_mb">
            <p>ALTER TABLE table_name</p>
            <p>SET UNUSED COLUMN column_name;</p>
            <p>ALTER TABLE table_name</p>
            <p>DROP UNUSED COLUMNS;</p>
        </div>
        <p class="example">
            SET UNUSED исключает колонку из таблицы, но физического удаления не происходит.
            Некоторая альтернатива DROP, но с возможностью отложенного удаления данных.
            Удобно если в таблице куча данных, и их удаление занимает много времени,
            то при таком раскладе можно выбоать время когда данные физически будут удалены.
        </p>

        <p class="bold no_mb">Переименование столбца</p>
        <div class="code bold">
            <p>ALTER TABLE table_name</p>
            <p>RENAME COLUMN column_name_old TO column_name_new;</p>
        </div>

        <p class="bold no_mb">Запрет на изменение таблицы</p>
        <div class="code bold no_mb">
            <p>ALTER TABLE table_name</p>
            <p>READ ONLY;</p>
        </div>
        <p class="example">Данные нельзя изменить (вставить, удалить и т.п.), но саму таблицу можно удалить.</p>

        <p class="main-mind no_mb">
            Пока в другой сессии открыта транзакция, то в текущей сессии DDL команда не может быть выполнена.
        </p>
        <p class="main-mind no_mb">Она будет ждать закрытия транзакции.</p>
        <p class="example">
            По факту перед и после DDL команд стоит автокоммит.
        </p>

    </div>

    <hr>
    <div id="truncate">
        <h3><a href="#chapter12">Опустошение таблиц</a></h3>
        <div class="code bold no_mb">
            <span class="example--word">TRUNCATE TABLE</span>
            schema.<span class="example--word">table_name</span>
        </div>
        <p class="example">Таблица осталась, а строк в ней нет. Не изменяет структуру таблицы.</p>

        <p class="main-mind">Удаляет все строки.</p>
        <p class="main-mind">Нельзя восстановить с помощью ROLLBACK.</p>
    </div>

    <hr>
    <div id="drop">
        <h3><a href="#chapter12">Удаление таблиц</a></h3>
        <div class="code bold no_mb">
            <span class="example--word">DROP TABLE</span>
            schema.<span class="example--word">table_name</span>
        </div>
        <p class="example">Удалена информация и сама таблица с ее структурой.</p>
        <p class="main-mind">
            Нельзя удалить, если в другой сессии есть открытая транзакция,
            или есть связи с другими таблицами.
        </p>
    </div>


    <a href="#" class="button button--top"></a>
</section>

<section class="container" id="chapter13">
    <h1>Раздел 13. <a href="#">DDL&nbsp;Команды: CONSTRAINT и&nbsp;INDEX</a></h1>

    <div>
        <div id="constraint_intro">
            <p class="main-mind">CONSTRAINT - это бизнес правило, которому должно удовлетворять значение.</p>
            <div class="horizontal-schema horizontal-schema--design mb20">
                <div><a href="#constraint">CONSTRAINT</a></div>
                <div>
                    <div>
                        <p class="no_mb"><a href="#not_null">NOT NULL</a></p>
                        <p class="no_mb example">Нужно обязательно что-то вставлять.</p>

                    </div>
                    <div>
                        <p class="no_mb"><a href="#primary_key">PRIMARY KEY</a></p>
                        <p class="no_mb example">Для уникальной идентификации. Уникальный и not null.</p>
                    </div>
                    <div>
                        <p class="no_mb"><a href="#foreign_key">FOREIGN KEY</a></p>
                        <p class="no_mb example">Для указания связи с primary key. Может быть null.</p>
                    </div>
                    <div>
                        <p class="no_mb"><a href="#check">CHECK</a></p>
                        <p class="no_mb example">Проверка соответствия условию.</p>
                    </div>
                    <div>
                        <p class="no_mb"><a href="#unique">UNIQUE</a></p>
                        <p class="no_mb example">Допускаются только уникальные значения.</p>
                    </div>
                </div>
            </div>

            <div class="code bold">
                <p>... CONSTRAINT constraint_name <span class="example--word">constraint_type</span> ...</p>
            </div>
            <p>
                Constraint можно создавать прямо при создании таблицы (CREATE TABLE) в описании поля (inline level)
                или же после описания всех строк (table level), но тогда после надо указывать имя столбца.
            </p>
            <p>
                Constraint можно создавать на несколько столбцов (composite constraint). Используется вариант table
                level,
                и в скобках указываются те колонки, на которые необходимо распространить правило.
            </p>
            <p>Если не указать имя, оно будет присвоено автоматически.</p>
            <p class="no_mb">
                Если назначать constraint на уже имеющуюся таблицу с данными (ALTER TABLE),
                то данные должны удовлетворять условию, иначе будет ошибка и constraint не будет создан.
            </p>
            <p>
                Есть два варианта, через оператор MODIFY или через ADD.
            </p>
            <p class="mb20">Удалить constraint можно в любое время.</p>
        </div>

        <div id="index_intro">
            <p class="main-mind no_mb">
                INDEX - это объект БД, создаваемый с целью повышения производительности поиска данных.
            </p>
            <p class="example">
                Ускорение работы, с помощью индексов, достигается, в первую очередь, за счет того, что индекс
                имеет структуру, оптимизированную конкретно под поиск.
            </p>
            <div class="horizontal-schema horizontal-schema--design mb20">
                <div><a href="#index">INDEX TYPE</a></div>
                <div>
                    <div><a href="#b-tree">B-TREE</a></div>
                    <div><a href="#bitmap">BITMAP</a></div>
                </div>
            </div>
            <p>
                Используются при работе PRIMARY KEY и UNIQUE. Индексы создаются автоматически.
            </p>
            <div class="code bold">
                <p>
                    <span class="example--word">CREATE</span>
                    <span class="bad">{</span>UNIQUE<span class="bad">|</span>BITMAP<span class="bad">}</span>
                    <span class="example--word">INDEX</span>
                </p>
                <p>
                    schema.<span class="example--word">index_name ON</span>
                </p>
                <p>
                    schema.<span class="example--word">table_name (column1</span>
                    , collumn2, ...<span class="example--word">);</span>
                </p>
                <p class="example">Если не указать UNIQUE или BITMAP будет создан B-TREE </p>
                <p class="example">Если не указать UNIQUE будет создан B-TREE NOT UNIQUE</p>
            </div>

            <p>Индексы могут быть композитными.</p>

            <div class="code bold no_mb">
                <span class="example--word">DROP INDEX</span>
                schema.<span class="example--word">index_name;</span>
                <p class="example">Нельзя удалить индексы, которые используются в constraint.</p>
            </div>


        </div>

    </div>

    <hr>
    <div id="constraint">
        <h3><a href="#constraint_intro">CONSTRAINT TYPE</a></h3>

        <div id="unique">
            <h4><a href="#constraint_intro">UNIQUE</a></h4>
            <p class="main-mind">Принуждает столбец(ы) содержать только уникальные значения. Исключение - null.</p>
            <p class="no_mb">Создает индекс. Он делает поиск быстрым</p>
            <p>При поиске по null делает full table scan!</p>
        </div>

        <div id="not_null">
            <h4><a href="#constraint_intro">NOT NULL</a></h4>
            <p class="main-mind">Не разрешает столбцам содержать null.</p>
            <p>Нужно указывать для каждого столбца (inline level), в table level этот constraint не создать.</p>
            <p>
                Если у поля есть DEFAULT, то он будет использоваться если добавляем без указания имени
                столбца в VALUES. При попытке добавить null "руками" - будет ошибка.
            </p>
        </div>

        <div id="primary_key">
            <h4><a href="#constraint_intro">PRIMARY KEY</a></h4>
            <p class="main-mind no_mb">
                Принуждает столбец(ы) содержать только уникальные значения и не разрешает содержать значение null.
            </p>
            <p class="example">По факту, это UNIQUE и NOT NULL вместе.</p>
            <p>В таблице не может быть больше одного PRIMARY KEY столбца.</p>
            <p>Может быть композитным (состоять из нескольких столбцов.)</p>
        </div>

        <div id="foreign_key">
            <h4><a href="#constraint_intro">FOREIGN KEY</a></h4>
            <p class="main-mind">
                Принуждает использовать значение из определенного столбца другой таблицы или null.
            </p>
            <p>
                FOREIGN KEY определен в child-таблице и его столбец зависит от столбца в parrent-таблице.
                Т.е. создается parent-child relationship. Отношение Many-To-One.
            </p>
            <p>
                Должен ссылаться на UNIQUE или PRIMARY KEY.
            </p>
            <p class="no_mb">Inline level</p>
            <div class="code bold">
                <p>
                    ... CONSTRAINT constraint_name
                    <span class="example--word">REFERENCES parent-table_name(column_name)</span>
                    ...
                </p>
            </div>
            <p class="no_mb">Table level</p>
            <div class="code bold">
                <p>
                    ... CONSTRAINT constraint_name
                    <span class="example--word">FOREIGN KEY(column_name) REFERENCES parent-table_name(column_name)</span>
                    ...
                </p>
                <p class="example">Если не указать column_name, то ссылка будет на FOREIGN KEY.</p>
            </div>
            <p>
                Для задания поведения при удалении используется <span class="code-word">ON DELETE</span> с параметром:
            </p>
            <ol>
                <li class="mb10">
                    <span class="code-word">CASCADE</span>
                    - при удалении записи в parent-таблице будут удалены все связанные строки в child-таблице
                </li>
                <li>
                    <span class="code-word">SET NULL</span>
                    - запись в parent-таблице будет удалена, в связанные строки в child-таблице будет записан null
                </li>
            </ol>
            <p>
                Так же, при наличии связи FOREIGN KEY нельзя
                очистить(<a href="#truncate">TRUNCATE</a>)
                или удалить(<a href="#drop">DROP</a>) таблицу.
            </p>
        </div>

        <div id="check">
            <h3><a href="#constraint_intro">CHECK</a></h3>
            <p class="main-mind">Принуждает использовать значения, которые удовлетворяются его условию(ям).</p>
            <p>В условиях можно использовать некоторые функции, но не все.</p>
            <p>В условии нельзя использовать SUBQUERY.</p>
        </div>

        <hr>
        <div>
            <h3>Использование</h3>
            <p>Где может быть использован constraint:</p>
            <table class="list list--dictionary list--content-center" aria-label="constraint_use">
                <thead>
                <tr>
                    <th>Constraint</th>
                    <th>Inline level</th>
                    <th>Table level</th>
                    <th>MODIFY</th>
                    <th>ADD</th>
                <tr>
                </thead>
                <tr>
                    <td>UNIQUE</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                </tr>
                <tr>
                    <td>NOT NULL</td>
                    <td>Y</td>
                    <td>N</td>
                    <td>Y</td>
                    <td>N</td>
                </tr>
                <tr>
                    <td>PRIMARY KEY</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                </tr>
                <tr>
                    <td>FOREIGN KEY</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                </tr>
                <tr>
                    <td>CHECK</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                    <td>Y</td>
                </tr>
            </table>
        </div>

    </div>

    <hr>
    <div id="index">
        <h3><a href="#index_intro">INDEX TYPE</a></h3>
        <p class="main-mind no_mb">
            Огромный плюс - индексы ускоряют поиск (почти всегда), т.е. ускоряют SELECT.
        </p>
        <p class="main-mind">
            Огромный минус - замедляют выполнение других DML команд.
        </p>

        <div id="rowid">
            <p><span class="bold no_mb">rowid</span> - присутствует всегда.</p>
            <p class="no_mb">Что бы его увидеть в SELECT надо указать руками.</p>
            <p class="no_mb">По нему можно делать SELECT</p>
            <p>И rowid <strong>глобально уникален!</strong></p>
        </div>

        <div id="b-tree">
            <h4><a href="#index_intro">B_TREE</a></h4>
            <p class="no_mb">Используется по умолчанию.</p>
            <p>На основе сбалансированного дерева.</p>
            <p class="no_mb"><span class="bold">UNIQUE</span>(по-умолчанию) - не поддерживает создание дубликатов.</p>
            <p><span class="bold">NOT_UNIQUE</span> - поддерживает создание дубликатов.</p>

            <p class="no_mb">Будет эффективен когда:</p>
            <ol>
                <li>Будет много строк.</li>
                <li>Делается небольшая выборка строк (2-4% относительно общего кол-ва).</li>
                <li>В столбце должно быть много уникальных значений.</li>
                <li>Когда используется where, join, group by.</li>
            </ol>
        </div>
        <div id="bitmap">
            <h4><a href="#index_intro">BITMAP</a></h4>
        </div>
    </div>


    <a href="#" class="button button--top"></a>
</section>

<section class="container" id="chapter14">
    <h1>Раздел 14. <a href="#">DDL&nbsp;Команды: VIEW, SYNONYM и&nbsp;SEQUENCE</a></h1>


    <a href="#" class="button button--top"></a>
</section>

<footer>
    <div class="footer__text"><a href="https://t.me/java40plus" title="Мой блог в телеграм">
        Алексей Маслов, 2021-2022
    </a></div>
</footer>

</body>

<script src="../../js/spoiler.js"></script>

</html>
