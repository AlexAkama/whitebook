<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL COURSE</title>
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body>

<section class="container">
    <h1 class="no_mb">JAVA SQL</h1>
    <div class="after-h1">Записки по курсу
        "SQL для начинающих: С&nbsp;нуля до сертификата Oracle "
    </div>
    <ol class="menu">
        <li><a href="#chapter01">Введение в SQL</a></li>
        <li><a href="#chapter02">Знакомство с SELECT</a></li>
        <li><a href="#chapter03">Selection и операторы</a></li>
        <li><a href="#chapter04">Функции</a></li>
        <li><a href="#chapter05">CONVERSION, GENERAL и CONDITIONAL функции</a></li>
        <li><a href="#chapter06">GROUP функции, GROUP BY, HAVING</a></li>
        <li><a href="#chapter07">JOIN(объединение)</a></li>
    </ol>
    <div class="back-panel">
        <a href="../../" class="button button--home">На главную</a>
    </div>
</section>

<section class="container" id="chapter01">
    <h1>Раздел 1. Введение&nbsp;в&nbsp;SQL <span class="update-time">12.05.2022 22:56</span></h1>
    <p>
        <strong>SQL (Structured Query Language)</strong>
        - Язык структурированных запросов.
    </p>
    <p class="no_mb">
        Один из инструментов работы с БД -
        <strong>SQL Developer</strong>
    </p>
    <p>
        <a class="link-to-source" href="https://www.oracle.com/tools/downloads/sqldev-downloads.html"
           target="_blank">
            скачать</a>
    </p>
    <p class="main-mind">
        БД - совокупность данных, которые хранятся по определенным правилам и используются для удовлетворения
        информационных потребностей пользователей.
    </p>
    <p class="main-mind">
        Реляционная БД - это, где вся информация предоставляется в виде таблиц.
    </p>
    <p class="main-mind no_mb">
        Нормализация — это процесс организации данных в базе данных, включающий создание таблиц и установление отношений
        между ними в соответствии с правилами, которые обеспечивают защиту данных и делают базу данных более гибкой,
        устраняя избыточность и несогласованные зависимости.
    </p>
    <p>
        <a class="link-to-source"
           href="https://docs.microsoft.com/ru-ru/office/troubleshoot/access/database-normalization-description"
           target="_blank">
            Источник
        </a>
    </p>

    <p class="example">
        Еще существуют, например, иерархические БД
    </p>

    <hr>
    <h3>SQL КОМАНДЫ</h3>
    <p class="no_mb"><strong>DML</strong> - Data Manipulation Language</p>
    <p class="example">Предназначены для манипуляции данными</p>
    <p class="no_mb"><strong>DDL</strong> - Data Definition Language</p>
    <p class="example">Предназначены для определения структуры БД и работы с объектами (CRUD)</p>
    <p class="no_mb"><strong>TCL</strong> - Transaction Control Language</p>
    <p class="example">Предназначены для реализации и управления транзакциями</p>
    <p class="no_mb"><strong>DCL</strong> - Data Control Language</p>
    <p class="example">Предназначены определения доступа к данным</p>
    <p>
        <a class="link-to-source" href="https://info-comp.ru/what-is-ddl-dml-dcl-tcl" target="_blank">источник</a>
    </p>
    <div class="flex" style="max-width: 500px;">
        <div class="min-w-75">
            <p class="main-mind">DML</p>
            <p>SELECT</p>
            <p>INSERT</p>
            <p>UPDATE</p>
            <p>DELETE</p>
            <p>MERGE</p>
        </div>
        <div class="min-w-75">
            <p class="main-mind">DDL</p>
            <p>CREATE</p>
            <p>ALTER</p>
            <p>DROP</p>
            <p>RENAME</p>
            <p>TRUNCATE</p>
        </div>
        <div class="min-w-75">
            <p class="main-mind">TCL</p>
            <p>COMMIT</p>
            <p>ROLLBACK</p>
            <p>SAVEPOINT</p>
        </div>
        <div class="min-w-75">
            <p class="main-mind">DCL</p>
            <p>GRANT</p>
            <p>REVOKE</p>
        </div>
    </div>
    <p class="example">Это далеко не все команды...</p>

    <hr>
    <h3>ТИПЫ ДАННЫХ</h3>
    <p class="main-mind">
        Тип данных - это множество допустимых значений этих данных, а также совокупность операция над ними.
    </p>
    <h4>Числовые типы</h4>
    <p>INTEGER</p>
    <p class="no_mb">NUMBER(p,s)</p>
    <p class="example">
        p(precision) - общее максимальное кол-во цифр
        <br>s(scale) - сколько из общего отводится на дробную часть
        <br>Важно! Кол-во на целую часть = p - s
    </p>
    <h4>Алфавитно-цифровые типы</h4>
    <p class="no_mb">CHAR(length)</p>
    <p class="example">Фиксированная длина</p>
    <p class="no_mb">VARCHAR2(size)</p>
    <p class="example">Переменная длинна</p>
    <a href="#" class="button button--top"></a>
    <h4>Типы даты и времени</h4>
    <p class="no_mb">DATE</p>
    <p class="example">Содержит информацию о голе, месяце, дне, часе, минуте, секунде.</p>
    <p class="no_mb">TIMESTAMP(f)</p>
    <p class="example">Содержит информацию о голе, месяце, дне, часе, минуте, секунде,
        <strong>долях секунды</strong> (f - кол-во десятичных знаков)
    </p>
    <h4>Тип NULL</h4>
    <p class="no_mb"><strong>NULL</strong> - это отсутствие данных.</p>
    <p class="example">0, пробел или строка 'null' - это не null. Они занимают место в памяти.
        <br>Результат арифметических операций с null - всегда null.</p>
    <hr>
    <h3>Команда DESCRIBE</h3>
    <p class="example"><strong>Data Dictionary</strong> - место где Oracle хранит данные о таблицах. Нужна для DDL.</p>
    <div class="code no_mb bold">
        <span class="example--word">DESC</span>RIBE SCHEMA.<span class="example--word">TABLE_NAME</span>
    </div>
    <p class="example">Вывод данных о структуре таблице (имя, тип).</p>

</section>

<section class="container" id="chapter02">
    <h1>Раздел 2. Знакомство&nbsp;с&nbsp;SELECT <span class="update-time">13.05.2022 13:21</span></h1>
    <hr>
    <h3>Фундаментальные концепции</h3>
    <p><strong>PROJECTION</strong> - выбор столбцов из таблицы.</p>
    <p><strong>SELECTION</strong> - выбор строк из таблицы.</p>
    <p><strong>JOINING</strong> - объединение таблиц.</p>
    <hr>
    <h3>Команда SELECT</h3>
    <div class="code bold">
        <span class="example--word">SELECT * FROM&nbsp;table_name;</span>
        <span class="example">//&nbsp;базовый синтаксис</span>
    </div>
    <div class="code bold">
        <span class="example--word">SELECT column(s) FROM&nbsp;table_name;</span>
        <span class="example">//&nbsp;projection</span>
    </div>
    <hr>
    <h3>Оператор DISTINCT</h3>
    <p>Выбор уникальных значений (сочетаний).</p>
    <div class="code bold">
        <span class="example--word">SELECT </span>
        <span>DISTINCT </span>
        <span class="example--word"> column(s) FROM&nbsp;table_name;</span>
    </div>
    <p class="main-mind">Если столбцов несколько, то выводится уникальные сочетания.</p>
    <hr>
    <h3>Выражения в Select list</h3>
    <p class="no_mb"><strong>Select list</strong> - это то что мы выбираем.</p>
    <div class="code">
        <span class="example--word bold">SELECT </span>
        <span class="example--word">{Select list}</span>
        <span class="example--word bold"> FROM&nbsp;table_name;</span>
    </div>
    <div class="code bold">
        <span class="example--word">SELECT column(s), expression(s) FROM&nbsp;table_name;</span>
    </div>
    <p>Оператор конкатенации - ||</p>
    <hr>
    <h3>Alias (псевдоним)</h3>
    <p><strong>Alias</strong>(псевдоним) - альтернативное имя для столбца или выражения.</p>
    <div class="code bold">
        <span class="example--word">SELECT column(s)</span>
        <span>alias</span><span class="example--word">, expression(s) </span>
        <span>alias</span><span class="example--word"> FROM&nbsp;table_name;</span>
    </div>
    <div class="code bold no_mb">
        <span class="example--word">SELECT column(s)</span>
        <span>AS alias</span><span class="example--word">, expression(s) </span>
        <span>AS alias</span><span class="example--word"> FROM&nbsp;table_name;</span>
    </div>
    <p class="example">AS можно не использовать, но оно добавляет читаемость.</p>
    <div class="code bold no_mb">
        <span class="example--word">SELECT column(s)</span>
        <span>"alias text"</span><span class="example--word">, expression(s) </span>
        <span>"alias text"</span><span class="example--word"> FROM&nbsp;table_name;</span>
    </div>
    <p class="example">Если нужен alias с пробелами в тексе то использовать двойные кавычки.
        <br>Кроме того, если нет кавычек alias будет отображен большими буквами.
    </p>
    <hr>
    <h3>Таблица DUAL</h3>
    <p>Служебная таблица с одним столбцом и одной строкой, и с фиктивными данными.</p>
    <hr>
    <h3>Оператор Q</h3>
    <p class="no_mb">Если в тексте хочется использовать одинарную кавычку то ее надо экранировать другой.</p>
    <p>Пример:
        <span class="bold">'It's my life'</span>
        - <span class="bad">не сработает</span>,
        <span class="bold">'It''s my life'</span>
        - <span class="good">сработает</span>.
    </p>
    <p class="no_mb">Кроме этого можно использовать оператор q (от Quote):</p>
    <div class="code">
        q'delimiter example text с кавычками delimiter'
    </div>
    <div class="code">
        SELECT q'&lt;It' my life&gt;' FROM dual;
    </div>
    <hr>
    <h3 class="no_mb">Шаблон SELECT</h3>
    <p class="bold">после первого знакомства</p>
    <div class="code bold">
        <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
        <span class="example--word">column(s)</span>&nbsp;<span>alias,</span>
        <span class="example--word">expression(s)</span>&nbsp;<span>alias</span><span class="bad">}</span>
        <span class="example--word">FROM&nbsp;table_name;</span>
    </div>

    <a href="#" class="button button--top"></a>
</section>

<section class="container" id="chapter03">
    <h1>Раздел 3. Selection и&nbsp;операторы <span class="update-time">14.05.2022 13:29</span></h1>
    <hr>
    <h3>Концепция Selection</h3>
    <div class="code bold">
        <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
        <span class="example--word">column(s)</span>&nbsp;<span>alias,</span>
        <span class="example--word">expression(s)</span>&nbsp;<span>alias</span><span class="bad">}</span>
        <span class="example--word">FROM&nbsp;table_name</span>
        <span>WHERE&nbsp;condition(s)</span><span class="example--word">;</span>
    </div>
    <hr>
    <h3>Операторы сравнения</h3>
    <p>
        <span class="code-word">=</span>
        <span class="code-word">&gt;</span>
        <span class="code-word">&lt;</span>
        <span class="code-word">&gt;=</span>
        <span class="code-word">&lt;=</span>
        <span class="code-word">!=</span>
        <span class="code-word">&lt;&gt;</span>
    </p>
    <p>
        <span class="code-word">BETWEEN</span>
        <span class="code-word">IN</span>
    </p>
    <p>
        <span class="code-word">IS NULL</span>
    </p>
    <table aria-label="Like">
        <tr>
            <th></th>
        </tr>
        <tr>
            <td><span class="code-word no_mb">LIKE</span></td>
            <td class="example">
                <p style="margin-top: 0;">Служебные символы могут быть заменены:</p>
                <p class="no_mb" style="margin-top: 0;">% - на любое кол-во символов;</p>
                <p class="no_mb" style="margin-top: 0;">_ - на один символ;</p>
                <p>Для экранирования: ... LIKE 'St\_%' <strong>ESCAPE</strong> '\';</p>
            </td>
        </tr>
    </table>
    <hr>
    <h3>Логические операторы</h3>
    <p>
        <span class="code-word">AND</span>
        <span class="code-word">OR</span>
        <span class="code-word">NOT</span>
    </p>
    <hr>
    <h3>Приоритеты операторов</h3>
    <table class="list" aria-label="Приоритеты операторов">
        <thead>
        <tr>
            <th>Приоритет</th>
            <th>Оператор</th>
        </tr>
        </thead>
        <tr>
            <td>1</td>
            <td>
                <span class="code-word">(</span>
                <span class="code-word">)</span></td>
        </tr>
        <tr>
            <td>2</td>
            <td><span class="code-word">/</span>
                <span class="code-word">*</span></td>
        </tr>
        <tr>
            <td>3</td>
            <td><span class="code-word">+</span>
                <span class="code-word">-</span></td>
        </tr>
        <tr>
            <td>4</td>
            <td><span class="code-word">||</span></td>
        </tr>
        <tr>
            <td>5</td>
            <td><span class="code-word">=</span>
                <span class="code-word">&gt;</span>
                <span class="code-word">&lt;</span>
                <span class="code-word">&gt;=</span>
                <span class="code-word">&lt;=</span></td>
        </tr>
        <tr>
            <td>6</td>
            <td><span class="code-word">[NOT] LIKE</span>
                <span class="code-word">IS [NOT] NULL</span>
                <span class="code-word">[NOT] IN</span></td>
        </tr>
        <tr>
            <td>7</td>
            <td><span class="code-word">[NOT] BETWEEN</span></td>
        </tr>
        <tr>
            <td>8</td>
            <td><span class="code-word">!=</span>
                <span class="code-word">&lt;&gt;</span></td>
        </tr>
        <tr>
            <td>9</td>
            <td><span class="code-word">NOT</span></td>
        </tr>
        <tr>
            <td>10</td>
            <td><span class="code-word">AND</span></td>
        </tr>
        <tr>
            <td>11</td>
            <td><span class="code-word">OR</span></td>
        </tr>
    </table>
    <hr>
    <h3>ORDER BY</h3>
    <div class="code bold no_mb">
        <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
        <span class="example--word">column(s)</span>&nbsp;alias,
        <span class="example--word">expression(s)</span>&nbsp;alias<span class="bad">}</span>
        <span class="example--word">FROM&nbsp;table_name</span>
        WHERE&nbsp;condition(s) ORDER&nbsp;BY&nbsp;<span class="bad">{</span><span
            class="example--word">column(s)</span><span class="bad">|</span><span
            class="example--word">expressions(s)</span><span class="bad">|</span><span
            class="example--word">numeric position</span><span class="bad">}</span>
        <span class="bad">{</span>ASC<span class="bad">|</span>DESC<span class="bad">}</span>
        <span class="bad">{</span>NULLS FIRST<span class="bad">|</span>LAST<span class="bad">}</span>
        <span class="example--word">;</span>
    </div>
    <p class="example"><strong>numeric position</strong> считается из select list'а</p>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter04">
    <h1>Раздел 4. Функции <span class="update-time">16.05.2022 15:35</span></h1>
    <hr>
    <h3>Схема функций</h3>
    <div class="horizontal-schema horizontal-schema--design">
        <div>Function</div>
        <div>
            <div class="horizontal-schema horizontal-schema--design">
                <div>Single-row</div>
                <div>
                    <div><a href="#character">Character</a></div>
                    <div><a href="#numeric">Numeric</a></div>
                    <div><a href="#date">Date</a></div>
                    <div><a href="#conversion">Conversion</a></div>
                    <div><a href="#general">General</a></div>
                    <div><a href="#conditional">Conditional</a></div>
                </div>
            </div>
            <div>Multiple-row</div>
        </div>
    </div>

    <hr>
    <h2 class="no_mb" id="character"><a href="#chapter04">Character functions</a></h2>
    <p class="example">Функции которые работают с текстом</p>
    <div class="horizontal-schema horizontal-schema--design">
        <div>Character function</div>
        <div>
            <div>Case conversion function</div>
            <div>Character manipulation function</div>
        </div>
    </div>

    <h3>Case conversion functions</h3>
    <h4>Перевод в нижний регистр</h4>
    <span class="code-word example--word no_mb">LOWER(s)</span>
    <span class="example">, где s - строка.</span>
    <h4>Перевод в верхний регистр</h4>
    <span class="code-word example--word no_mb">UPPER(s)</span>
    <span class="example">, где s - строка.</span>
    <h4>Перевод в верхний регистр первой буквы</h4>
    <span class="code-word example--word no_mb">INITCAP(s)</span>
    <span class="example">, где s - строка.</span>
    <p class="example">Важно! Переводится первый символ каждого слова.</p>

    <h3>Character manipulation function</h3>
    <h4>Конкатенация</h4>
    <span class="code-word example--word">CONCAT(s,s)</span>
    <span class="example">, где s - строка. Аналогичен оператору </span>
    <span class="code-word">||</span>
    <h4>Длина строки</h4>
    <span class="code-word example--word">LENGTH(s)</span>
    <span class="example">, где s - строка.</span>
    <p class="example">Важно! Считаются все символы, включая проблелы и т.п.</p>
    <h4>Добавление символов (слева/справа)</h4>
    <span class="code-word example--word">LPAD(s, n, p)</span> и
    <span class="code-word example--word">RPAD(s, n, p)</span>
    <span class="example">где&nbsp;s&nbsp;-&nbsp;строка, n&nbsp;-&nbsp;конечная длинна текста, p&nbsp;-&nbsp;текст для заполнения.</span>
    <h4>Обрезка символов по краям</h4>
    <span class="code-word" style="white-space: normal;">
        <span class="example--word">TRIM(</span><span class="bad">{</span>trailing<span
            class="bad">|</span>leading<span class="bad">|</span>both<span class="bad">}</span>
        char&nbsp;FROM&nbsp;<span class="example--word">s)</span>
    </span>
    <p class="example no_mb">По умолчанию: тип удаления both, а символ для удаления - пробел.</p>
    <p class="example"> Важно: удалять можно только один какой-то символ.</p>
    <h4>Поиск в строке</h4>
    <span class="code-word" style="white-space: normal;">
            <span class="example--word">INSTR(s, searchString</span><span>, startPosition, nth&nbsp;occurrence</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где s - строка в которой ищем. searchString - искомый текст; startPosition - позиция с
        которой начинается поиск; <span style="white-space: nowrap">n-ное</span> появление;</p>
    <h4>Извлечение подстроки</h4>
    <span class="code-word" style="white-space: normal;">
            <span class="example--word">SUBSTR(s, startPosition</span><span>, n</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где s - строка в которой ищем. startPosition - позиция с которой начинаем извлекать;
        n&nbsp;-&nbsp;кол-во извлекаемых символов;</p>
    <p class="example no_mb">Если startPosition&lt;0 то позиция считается с конца s.</p>
    <p class="example">Важно: Если длина строки s меньше startPosition то функция вернет null.</p>
    <h4>Замена подстроки</h4>
    <span class="code-word" style="white-space: normal;">
            <span class="example--word">REPLACE(s, searchString</span><span>, replacementString</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где s - строка в которой производим замену. searchString - текст, который нужно заменить;
        replacementString - текст, на который нужно заменить;</p>
    <p class="example">Если replacementString не указан, то функция удалит searchString из s.</p>

    <hr>
    <h2 class="no_mb" id="numeric"><a href="#chapter04">Numeric functions</a></h2>
    <p class="example">Функции которые работают с числами</p>
    <h4>Округление</h4>
    <span class="code-word">
        <span class="example--word">ROUND(n</span>, precision<span class="example--word">)</span>
    </span>
    <p class="example">Математическое округление. При precision&lt;0 округляется целая часть.</p>
    <h4>Отбрасывание</h4>
    <span class="code-word">
        <span class="example--word">TRUNC(n</span>, precision<span class="example--word">)</span>
    </span>
    <p class="example">Отбрасывание числа. При precision&lt;0 происходит замена на 0 в целой части числа.</p>
    <h4>Остаток от деления</h4>
    <span class="code-word"><span class="example--word">MOD(dividend, divisor)</span></span>
    <p class="example">Интересно: можно использовать дробные числа.</p>

    <hr>
    <h2 class="no_mb" id="date"><a href="#chapter04">Date functions</a></h2>
    <p class="example">Функции для работы с датами</p>

    <p class="no_mb">При вычитании даты из даты получаем число <strong>кол-во дней</strong> между датами.</p>
    <p class="no_mb">Можно прибавлять/вычитать число в результате дата + число дней</p>
    <p>Складывать/делить/умножать даты нельзя.</p>

    <h4>Системное время</h4>
    <span class="code-word example--word">SYSDATE</span>
    <p class="example">Возвращает текущее время db-server'а</p>

    <h4>Разница между датами</h4>
    <span class="code-word example--word" style="white-space: normal">MONTHS_BETWEEN(start_date, finish_date)</span>
    <p class="example no_mb">Возвращает дробное число, кол-во месяцев между датами.</p>
    <p class="example no_mb">Стандарт oracle месяц = 31 день.</p>
    <p class="example">Если первый аргумент больше второго - возвращает отрицательное число.</p>

    <h4>Добавление к дате</h4>
    <span class="code-word example--word">ADD_MONTHS(date, number_of_months)</span>
    <p class="example no_mb">Добавление/вычитание кол-ва месяцев.</p>
    <p class="example">Дробная часть в аргументе игнорируется, т.е. добавляются только целые месяцы.</p>

    <h4>Поиск следующего дня недели</h4>
    <span class="code-word example--word">NEXT_DAY(date, day_of_the_week)</span>
    <p class="example no_mb">Где, date - дата, day_of_the_week - день недели.</p>
    <p class="example">Возвращает дату следующего указанного дня недели.</p>

    <h4>Поиск последнего дня месяца</h4>
    <span class="code-word example--word">LAST_DATE(date)</span>
    <p class="example">Возвращает дату, последний день месяца в указанной дате.</p>

    <h4>Округление даты</h4>
    <span class="code-word">
        <span class="example--word">ROUND(date</span><span>, date_precision_format</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где, date - дата, date_precision_format - точность округления*.</p>

    <h4>Отбрасывание даты</h4>
    <span class="code-word">
        <span class="example--word">TRUNC(date</span><span>, date_precision_format</span><span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Где, date - дата, date_precision_format - точность округления*.</p>

    <h4>Точность округления</h4>
    <table class="list" style="min-width: 320px;" aria-label="date_precision_format">
        <thead>
        <th>Код</th>
        <th>Граница</th>
        </thead>
        <tr>
            <td>CC</td>
            <td>век</td>
        </tr>
        <tr>
            <td>YYYY</td>
            <td>год</td>
        </tr>
        <tr>
            <td>Q</td>
            <td>четверть</td>
        </tr>
        <tr>
            <td>MM</td>
            <td>месяц</td>
        </tr>
        <tr>
            <td>W</td>
            <td>неделя</td>
        </tr>
        <tr>
            <td>DD</td>
            <td>день</td>
        </tr>
        <tr>
            <td>HH</td>
            <td>час</td>
        </tr>
        <tr>
            <td>MI</td>
            <td>минута</td>
        </tr>
    </table>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter05">
    <h1>Раздел 5. CONVERSION, GENERAL и CONDITIONAL функции<span class="update-time">28.05.2022 23:04</span></h1>
    <hr>
    <h2 class="no_mb" id="conversion"><a href="#chapter05">Conversion functions</a></h2>
    <p class="example">Функции конвертации данных из одного типа в другой</p>

    <h4>Конвертация числа в строку</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">TO_CHAR(number</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= T</span>
    </span>
    <p class="example">Возвращает тип VARCHAR2</p>
    <table class="list no_mb" aria-label="форматы для чисел">
        <thead>
        <th>Элемент</th>
        <th>Описание</th>
        <th>Формат</th>
        <th>Число</th>
        <th>Текст</th>
        </thead>
        <tr>
            <td>9</td>
            <td>Ширина</td>
            <td>99999</td>
            <td>18</td>
            <td>18</td>
        </tr>
        <tr>
            <td>0</td>
            <td>Отображение нуля</td>
            <td>099999</td>
            <td>18</td>
            <td>000018</td>
        </tr>
        <tr>
            <td>.</td>
            <td>Позиция десятичной точки</td>
            <td>099999.99</td>
            <td>18.35</td>
            <td>000018.350</td>
        </tr>
        <tr>
            <td>D</td>
            <td>Позиция десятичного разделителя</td>
            <td>099999D999</td>
            <td>18.35</td>
            <td>000018.350</td>
        </tr>
        <tr>
            <td>,</td>
            <td>Позиция запятой</td>
            <td>099,999,999</td>
            <td>1234567</td>
            <td>001,234,567</td>
        </tr>
        <tr>
            <td>G</td>
            <td>Позиция разделителя групп</td>
            <td>099999G999</td>
            <td>1234567</td>
            <td>001,234,567</td>
        </tr>
        <tr>
            <td>$</td>
            <td>Знак $</td>
            <td>$099999</td>
            <td>18</td>
            <td>$000018</td>
        </tr>
        <tr>
            <td>L</td>
            <td>Локальная валюта</td>
            <td>L099999</td>
            <td>18</td>
            <td>$000018</td>
        </tr>
        <tr>
            <td>MI</td>
            <td>Позиция знака -</td>
            <td>099999MI</td>
            <td>-18</td>
            <td>000018-</td>
        </tr>
        <tr>
            <td>PR</td>
            <td>Скобки для отрицательных чисел</td>
            <td>099999PR</td>
            <td>-18</td>
            <td>&lt;000018&gt;</td>
        </tr>
        <tr>
            <td>S</td>
            <td>Префикс + или -</td>
            <td>S099999</td>
            <td>18</td>
            <td>+000018</td>
        </tr>
    </table>
    <p class="example">* Если число не влазит в формат получаем строку из символа #</p>

    <h4>Конвертация даты в строку</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">TO_CHAR(date</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= T</span>
    </span>
    <p class="example">Возвращает тип VARCHAR2</p>
    <p></p>
    <table class="list no_mb" aria-label="форматы для даты" id="conversion_format">
        <thead>
        <th>Элемент</th>
        <th>Описание</th>
        <th>Текст</th>
        </thead>
        <tbody>
        <tr>
            <td>Y</td>
            <td>Последняя цифра года</td>
            <td>9</td>
        </tr>
        <tr>
            <td>YY</td>
            <td>Последние две цифры года</td>
            <td>19</td>
        </tr>
        <tr>
            <td>YYY</td>
            <td>Последние три цифры года</td>
            <td>019</td>
        </tr>
        <tr>
            <td>YYYY</td>
            <td>Год (целиком)</td>
            <td>2019</td>
        </tr>
        <tr>
            <td>RR</td>
            <td>Год в формате 2х цифр</td>
            <td>19</td>
        </tr>
        <tr>
            <td>YEAR</td>
            <td>Буквенное описание года <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>TWENTY NINETEEN</td>
        </tr>
        <tr>
            <td>MM</td>
            <td>Месяц в формате 2х цифр</td>
            <td>09</td>
        </tr>
        <tr>
            <td>MON</td>
            <td>Месяц в формате 3х букв <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>SEP</td>
        </tr>
        <tr>
            <td>MONTH</td>
            <td>Буквенное написание месяца <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>SEPTEMBER</td>
        </tr>
        <tr>
            <td>D</td>
            <td>День недели</td>
            <td>6</td>
        </tr>
        <tr>
            <td>DD</td>
            <td>День месяца: две цифры</td>
            <td>20</td>
        </tr>
        <tr>
            <td>DDD</td>
            <td>День года</td>
            <td>263</td>
        </tr>
        <tr>
            <td>DY</td>
            <td>День недели: три буквы <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>FRI</td>
        </tr>
        <tr>
            <td>DAY</td>
            <td>День недели: текстовое название <span class="example">(Чувствительно&nbsp;к&nbsp;регистру)</span></td>
            <td>FRIDAY</td>
        </tr>
        <tr>
            <td>W</td>
            <td>Неделя месяца</td>
            <td>3</td>
        </tr>
        <tr>
            <td>WW</td>
            <td>Неделя года</td>
            <td>38</td>
        </tr>
        <tr>
            <td>Q</td>
            <td>Квартал года</td>
            <td>3</td>
        </tr>
        <tr>
            <td>СС</td>
            <td>Век</td>
            <td>21</td>
        </tr>
        <tr>
            <td>AM, PM, A.M.,&nbsp;P.M.</td>
            <td>Индикатор</td>
            <td>PM</td>
        </tr>
        <tr>
            <td>HH, HH12 и HH24</td>
            <td>Формат времени</td>
            <td>04, 04, 16</td>
        </tr>
        <tr>
            <td>MI</td>
            <td>Минуты</td>
            <td>17</td>
        </tr>
        <tr>
            <td>SS</td>
            <td>Секунды</td>
            <td>38</td>
        </tr>
        <tr>
            <td>SSSSS</td>
            <td>Секунды после полуночи</td>
            <td>58638</td>
        </tr>
        <tr>
            <td>- / . , ? # !</td>
            <td>Пунктуация: 'MM.YY'</td>
            <td>09.19</td>
        </tr>
        <tr>
            <td>"текст"</td>
            <td>'"Quarter " Q " of " Year'</td>
            <td>Quarter 3 of Twenty Nineteen</td>
        </tr>
        <tr>
            <td>TH</td>
            <td>'DDth " of " Month'</td>
            <td>20TH of September</td>
        </tr>
        <tr>
            <td>SP</td>
            <td>Буквенное написание 'MmSp Month Yyyysp'</td>
            <td>Nine September Two Thousand Nineteen</td>
        </tr>
        <tr>
            <td>THSP, SPTH</td>
            <td>Комбинация 'hh24SpTh'</td>
            <td>sixteenth</td>
        </tr>
        </tbody>
    </table>
    <p class="example">* Если появляются лишние пробелы, то перед шаблоном надо использовать
        <span class="code-word">fm</span>, т.е. ,например, fmMON</p>

    <h4>Конвертация из строки в дату</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">TO_DATE(text</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= D</span>
    </span>
    <p class="example">Используем те же <a href="#conversion_format">маски</a></p>

    <h4>Конвертация текста в строку</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">TO_NUMBER(text</span><span>, format mask, nls_parameters</span><span
            class="example--word">)</span>
        <span class="bad">= N</span>
    </span>
    <p class="example">Используем те же <a href="#conversion_format">маски</a></p>

    <hr>
    <h2 class="no_mb" id="general"><a href="#chapter05">General functions</a></h2>
    <p class="example">Для упрощения работы с NULL</p>

    <h4>Проверка на NULL с дефолтным значением</h4>
    <span class="code-word example--word">NVL(value, if_null)</span>
    <p class="example">Если if_null = null вернется null</p>

    <h4>Проверка на NULL с дефолтными значениями</h4>
    <span class="code-word example--word">NVL2(value, if_not_null, if_null)</span>
    <p class="example">Парамтры if_not_null и if_null должны быть одного типа (или автоматически приводимы), но не могут
        быть Long.</p>

    <h4>Сравнение с возвратом NULL</h4>
    <span class="code-word example--word">NULLIF(value1, value2)</span>
    <p>Если параметры <strong>равны</strong> возвращается NULL, если <strong>неравны</strong> - первый параметр.</p>

    <h4>Возврат значения если не NULL</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">COALESCE(value1, value2</span>, ..., valueN<span class="example--word">)</span>
    </span>
    <p class="example no_mb">Возвращает первое значение из списка не равное NULL.</p>
    <p class="example">Если все параметры NULL, то будет возвращен NULL.</p>

    <hr>
    <h2 class="no_mb" id="conditional"><a href="#chapter05">Conditional functions</a></h2>
    <p class="example">Функции if-then-else логики</p>

    <h4>Каскадное сравнение (похоже на CASE)</h4>
    <span class="code-word" style="white-space: normal">
        <span class="example--word">DECODE(expr, comp1, if_true1</span>, comp2,&nbsp;if_true2, ..., comp2,&nbsp;if_trueN, if_else<span
            class="example--word">)</span>
    </span>
    <p class="example no_mb">Чисто oracle фишка, в чистом SQL ее нет.</p>
    <p class="example">Выражение expr сравнивается с comp1, если совпадает - возвращает if_true1. И так N раз. Если нет
        не одного совпадения возвращает if_else. Если if_else не указан - вернется NULL.</p>


    <h4>Simple CASE</h4>
    <div class="code-word">
        <p class="example--word">CASE expr</p>
        <p class="example--word">WHEN comp1 THEN if_true1</p>
        <p>WHEN comp2 THEN if_true2</p>
        <p>...</p>
        <p>WHEN compN THEN if_trueN</p>
        <p>ELSE if_false</p>
        <p class="example--word">END</p>
    </div>
    <p class="example">Сравниваем expr с разными comp.</p>

    <h4>Searched CASE</h4>
    <div class="code-word">
        <p class="example--word">CASE</p>
        <p class="example--word">WHEN cond1 THEN if_true1</p>
        <p>WHEN cond2 THEN if_true2</p>
        <p>...</p>
        <p>WHEN condN THEN if_trueN</p>
        <p>ELSE if_false</p>
        <p class="example--word">END</p>
    </div>
    <p class="example">Отсутствует expr, т.е. внутри cond мы можен сравнивать что угодно.</p>

    <p class="main-mind">В обоих случах, если нет if_false и ни одно из условий не выполнилось вернется NULL</p>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter06">
    <h1 class="no_mb">Раздел 6. GROUP&nbsp;функции<span class="update-time">01.06.2022 17:58</span></h1>
    <p class="example">Group или Multiple-row работают с агрегированной информацией</p>

    <h4 class="no_mb">COUNT</h4>
    <p class="example no_mb">подсчет по любому типу, null значения игнорируются</p>
    <span class="code-word no_mb" style="white-space: normal">
        <span class="example--word">COUNT(</span><span class="bad">{</span>*<span class="bad">| {</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="bad">}</span><span class="example--word">)</span>
    </span>
    <p class="example">expression - выражение или столбец</p>

    <h4 class="no_mb">SUM</h4>
    <p class="example no_mb">сумма, на вход только числовые значения, null значения игнорируются</p>
    <span class="code-word">
        <span class="example--word">SUM(</span><span class="bad">{</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="example--word">)</span>
    </span>
    <p class="example">expression - выражение или столбец</p>

    <h4 class="no_mb">AVG</h4>
    <p class="example no_mb">среднее арифметическое, на вход только числовые значения, null значения игнорируются</p>
    <span class="code-word">
        <span class="example--word">AVG(</span><span class="bad">{</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="example--word">)</span>
    </span>

    <h4 class="no_mb">MAX и MIN</h4>
    <p class="example no_mb">максимальное и минимальное, на вход можно число, дату и строку</p>
    <span class="code-word">
        <span class="example--word">MAX(</span><span class="bad">{</span>DISTINCT<span
            class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
            class="example--word">)</span>
    </span><span
        style="display: inline-block; text-align: center; margin: 5px;">и</span><span
        class="code-word">
        <span class="example--word">MIN(</span><span class="bad">{</span>DISTINCT<span
        class="bad">|</span>ALL<span class="bad">}</span><span class="example--word"> expression</span><span
        class="example--word">)</span>
    </span>
    <p></p>
    <hr>
    <h2>GROUP BY и HAVING</h2>
    <h4 class="no_mb">Вид SELECT'а с группировкой:</h4>
    <div class="code bold no_mb">
        <span class="example--word">SELECT *</span><span class="bad">|{</span><span>DISTINCT</span>
        <span class="example--word">column(s)</span>&nbsp;alias,
        <span class="example--word">expression(s)</span>&nbsp;alias, group_func(s)&zwj;(<span class="example--word">column</span><span
            class="bad">|</span><span class="example--word">expression</span> alias)<span class="bad">}</span><br>
        <span class="example--word">FROM&nbsp;table_name</span>
        <br>WHERE&nbsp;condition(s)
        <br>GROUP&nbsp;BY&nbsp;<span class="bad">{</span><span
            class="example--word">column(s)</span><span class="bad">|</span><span
            class="example--word">expressions(s)</span><span class="bad">}</span>
        <br>HAVING group_condition(s)
        <br>ORDER&nbsp;BY <span class="bad">{</span><span
            class="example--word">column(s)</span><span class="bad">|</span><span
            class="example--word">expressions(s)</span><span class="bad">|</span><span
            class="example--word">numeric&nbsp;position</span><span class="bad">}</span>
        <span class="bad">{</span>ASC<span class="bad">|</span>DESC<span class="bad">}</span>&nbsp;<span
            class="bad">{</span>NULLS&nbsp;FIRST<span class="bad">|</span>LAST<span class="bad">}</span><span
            class="example--word">;</span>
    </div>
    <p class="example no_mb">При группировке указывать алиас нельзя, только название столбца.</p>
    <p class="example">HAVING работает с группами, если нет GROUP BY, то он работает с текущей группой
        (но так лучше не делать и использовать в паре).</p>
    <p class="main-mind">Максимальная вложенность multiple-row функций = 2.</p>

    <a class="button--top" href="#"></a>
</section>

<section class="container" id="chapter07">
    <h1><a href="#">JOIN</a></h1>
    <div class="after-h1">

    </div>
    <h3>Типы(группы)</h3>
    <div class="horizontal-schema horizontal-schema--design" id="join">
        <div>JOIN</div>
        <div>
            <div><a href="#join_inner">INNER JOIN (NATURAL JOIN)</a></div>
            <div><a href="#join_outer">OUTER JOIN</a></div>
            <div><a href="#join_cross">CROSS JOIN</a></div>
        </div>
    </div>
    <p class="no_mb">еще</p>
    <div class="horizontal-schema horizontal-schema--design">
        <div>JOIN</div>
        <div>
            <div>EQUIJOIN</div>
            <div>NONEEQUIJOIN</div>
        </div>
    </div>
    <div class="tab-3">
        <p class="no_mb">
            <span class="example--word">EQUIJOIN</span>
            - это объединения в условиях которых используется равенство критериев.
        </p>
        <p>
            <span class="example--word">NONEEQUIJOIN</span>
            - если в условии не равенство, сравнение, between, ...
        </p>
    </div>
    <p class="no_mb">и отдельно</p>
    <div class="horizontal-schema horizontal-schema--design mb20">
        <a href="#join_oracle">ORACLE JOIN SYNTAX</a>
    </div>

    <hr>
    <div id="join_inner">
        <h3><a href="#chapter07">INNER JOIN (NATURAL JOIN)</a></h3>
        <p class="main-mind">
            В INNER JOIN результат попадают только строки удовлетворяющие условию объединения.
            Иные не выводятся!!!
        </p>
        <h4 class="no_mb">Типы INNER JOIN:</h4>
        <div class="horizontal-schema horizontal-schema--design">
            <div>INNER JOIN (NATURAL&nbsp;JOIN)</div>
            <div>
                <div><a href="#join_natural">NATURAL&nbsp;JOIN</a></div>
                <div><a href="#join_using">USING</a></div>
                <div><a href="#join_on">ON</a></div>
            </div>
        </div>
        <div id="join_natural">
            <h4><a href="#join_inner">NATURAL JOIN</a></h4>
            <p>Таблица к, которой присоединяем называется
                <span class="example--word">source</span>,
                та в которой ищем -
                <span class="example--word">target</span>.
            </p>
            <p class="no_mb">Объединяет по столбцам с одинаковыми именами, т.е. не дает выбрать критерий.</p>
            <p class="example no_mb">Если несколько столбцов, то объединение пойдет по всем.</p>
            <p class="example">Если нет столбцов с одинаковыми именами произойдет CROSS JOIN.</p>
            <p class="no_mb">При соединении поиск проходит по всем строкам таргета, а не останавливается когда
                совпало.</p>
            <p>Поэтому может быть несколько совпадений!!!</p>
            <p>Если в таргете не найдено совпадения, но в результат строка не попадает.</p>
            <div class="code bold no_mb">
                <p>SELECT column(s)</p>
                <p>FROM table_1 </p>
                <p>NATURAL JOIN table_2;</p>
            </div>
            <p class="example">Если нужно в селект листе указать столбец, по которому происходит объединение,
                то он указывается без имени таблицы или алиса таблицы (иначе ошибка)</p>
        </div>
        <div id="join_using">
            <h4><a href="#join_inner">INNER JOIN with USING</a></h4>
            <div class="code bold no_mb">
                <p>SELECT column(s)</p>
                <p>FROM table_1</p>
                <p>JOIN table_2 USING (column(s));</p>
            </div>
            <p class="example no_mb">В скобках указываем имена столбцов, по которым хотим произвести объединение.</p>
            <p class="example">Если указать все одинаковые какие есть, то результат будет такой же как у
                NATURAL&nbsp;JOIN.</p>
        </div>
        <div id="join_on">
            <h4><a href="#join_inner">INNER JOIN with ON</a></h4>
            <div class="code bold">
                <p>SELECT column(s)</p>
                <p>FROM table_1</p>
                <p>JOIN table_2 ON (column1 = column1));</p>
            </div>
        </div>
    </div>

    <hr>
    <div id="join_outer">
        <h3><a href="#chapter07">OUTER JOIN</a></h3>
        <p class="main-mind">
            В OUTER JOIN попадают также строки которы не соответствуют условию объединения.
            Какие определяется типом запроса.
            Очень часто используется в реальной жизни.
        </p>
        <h4>Типы:</h4>
        <p><span class="example--word">LEFT OUTER JOIN</span>
            - выводится результат INNER JOIN, а потом добавляются все строки
            из левой таблицы,
            по которым условие не было соблюдено.</p>
        <p><span class="example--word">RIGHT OUTER JOIN</span>
            - выводится результат INNER JOIN, а потом добавляются все строки
            из правой таблицы,
            по которым условие не было соблюдено.</p>
        <p><span class="example--word">FULL OUTER JOIN</span>
            - выводится результат INNER JOIN, а потом добавляются все строки
            из левой таблицы, а потом из правой,
            по которым условие не было соблюдено.</p>
        <div class="code bold">
            <p>SELECT column(s)</p>
            <p>FROM table_1</p>
            <p>LEFT|RIGHT|FULL OUTER JOIN table_2</p>
            <p>ON (column1 = column2);</p>
        </div>
    </div>

    <hr>
    <div id="join_cross">
        <h3><a href="#chapter07">CROSS JOIN</a></h3>
        <p class="no_mb">
            По факту, это объединение всех строк одной таблицы со всеми строками другой.
        </p>
        <p class="example">Т.е. если в первой 25 строк, во второй - 5, то в итоге 100</p>
        <div class="code bold">
            <p>SELECT column(s)</p>
            <p>FROM table_1</p>
            <p>CROSS JOIN table_2;</p>
        </div>
        <p>
            Это еще называют -
            Cartesian product или Декартово произведение
        </p>
    </div>

    <hr>
    <div id="join_oracle">
        <h3><a href="#chapter07">ORACLE JOIN SYNTAX</a></h3>
        <h4 class="no_mb">INNER JOIN</h4>
        <p class="no_mb">Таблицы через запятую, условие объединения в WHERE.</p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2 </p>
            <p>WHERE t1.column1 = t2.column2;</p>
        </div>
        <h4 class="no_mb">RIGHT OUTER JOIN</h4>
        <p class="main-mind mb02">
            Для OUTER JOIN используем оператор соединения
            <span class="code-word">(+)</span>
            в условии в WHERE, который указывает на то, какая из таблиц является таблицей добавления.
            Т.е. строки из этой таблицы попадают в результат только при соответствии условию.
        </p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2 </p>
            <p>WHERE t1.column1(+) = t2.column2;</p>
        </div>
        <h4 class="no_mb">LEFT OUTER JOIN</h4>
        <p class="mb02">Аналогично используем <span class="code-word">(+)</span>, только с другой стороны.</p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2 </p>
            <p>WHERE t1.column1 = t2.column2(+);</p>
        </div>
        <h4 class="no_mb">CROSS JOIN</h4>
        <p class="no_mb">Просто указываем таблицы через запятую.</p>
        <div class="code bold no_mb">
            <p>SELECT column(s)</p>
            <p>FROM table_1 t1, table_2 t2;</p>
        </div>
        <h4 class="no_mb">FULL OUTER JOIN</h4>
        <p>
            С помощью oracle синтаксиса
            <span class="example--word bad">сделать нельзя</span>
            - надо использовать базовый синтаксис SQL.
        </p>
    </div>

</section>

<footer>
    <div class="footer__text"><a href="https://t.me/java40plus" title="Мой блог в телеграм">
        Алексей Маслов, 2021-2022
    </a></div>
</footer>

</body>

</html>
